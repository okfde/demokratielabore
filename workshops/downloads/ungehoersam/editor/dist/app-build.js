"bundle";!function(){var a=System.amdDefine;a("about.html!github:systemjs/plugin-text@0.0.8.js",[],function(){return'<template><div class="about"><img class="demokratielabore-logo" src="media/Demokratielabore_Logo_Schwarz.png"><h1>About</h1><div>Begleitapp zum Workshop "Ungehörsam" der Demokratielabore.</div><div>Die Demokratielabore sind ein Modellprojekt der <a href="https://okfn.de">Open Knowledge Foundation Deutschland</a>, das vom <a href="http://www.bmfsfj.de">Bundesministerium für Familie, Senioren, Frauen und Jugend</a> im Rahmen des Bundesprogramms <a href="http://www.demokratie-leben.de">Demokratie leben!</a> gefördert wird.</div><div>Technische Umsetzung:<br><a href="http://dragonlab.de">Tobias Wehrum</a></div><div class="about-image"><a class="demokratielabore-link" href="https://demokratielabore.de">demokratielabore.de</a> <img src="media/freisteller_Raeume_Demokratielabore_RGB_0000_demo_small.png"> <a href="http://bildbauer.de">bildbauer.de</a> – CC BY-SA 4.0</div></div></template>'})}(),System.register("about.js",[],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d;return{setters:[],execute:function(){a("About",d=function a(){c(this,a)}),a("About",d)}}}),function(){var a=System.amdDefine;a("add-location-button.html!github:systemjs/plugin-text@0.0.8.js",[],function(){return'<template><div class="add-location-button"><button click.trigger="addLocation()"><i class="fa fa-plus-circle" aria-hidden="true"></i> Neuen Ort erstellen</button></div></template>'})}(),System.register("add-location-button.js",["./location","./data","aurelia-framework","aurelia-router"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h,i,j;return{setters:[function(a){d=a.Location},function(a){e=a.Data},function(a){f=a.inject},function(a){g=a.Router}],execute:function(){a("AddLocationButton",(h=f(e,g),j=h(i=function(){function a(b,d){c(this,a),this.data=b,this.router=d}return a.prototype.addLocation=function(){var a=this.data.createLocation();1===this.data.getLocationCount()&&(a.locationName=this.data.getGameInfo().startingLocation),this.router.navigateToRoute("location-editor",{id:a.id})},a}())||i)),a("AddLocationButton",j)}}}),function(){var a=System.amdDefine;a("app.html!github:systemjs/plugin-text@0.0.8.js",[],function(){return'<template><require from="nav-bar.html"></require><!--<require from="bootstrap/css/bootstrap.css"></require>--><require from="loading-indicator"></require><require from="print-area"></require><nav-bar router.bind="router"></nav-bar><loading-indicator loading.bind="router.isNavigating"></loading-indicator><div class="page-host no-print"><div><router-view class="col-md-8"></router-view></div></div><div class="print"><print-area></print-area></div></template>'})}(),System.register("app.js",["aurelia-framework","./data"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h;return{setters:[function(a){d=a.inject},function(a){e=a.Data}],execute:function(){a("App",(f=d(e),h=f(g=function(){function a(b){c(this,a),this.data=b}return a.prototype.configureRouter=function(a,b){a.title="Ungehörsam",a.map([{route:"",redirect:"overview"},{route:"overview",name:"overview",moduleId:"overview",nav:!0,settings:"fa-home"},{route:"print",name:"print",moduleId:"print",nav:!0,settings:"fa-print"},{route:"tools",name:"tools",moduleId:"tools",nav:!0,settings:"fa-cog"},{route:"debug",moduleId:"debug"},{route:"about",name:"about",moduleId:"about"}]),a.fallbackRoute("overview"),this.router=b},a.prototype.activate=function(a,b){return this.data.ensureDataIsLoaded()},a}())||g)),a("App",h)}}}),function(){var a=System.amdDefine;a("build-version-display.html!github:systemjs/plugin-text@0.0.8.js",[],function(){return'<template><a route-href="route: about;" class="build-version-display">v${buildVersion}</a></template>'})}(),function(){var a=System.amdDefine;a("debug.html!github:systemjs/plugin-text@0.0.8.js",[],function(){return'<template><require from="qr-code-display"></require><require from="value-converters"></require><button click.trigger="createTestData()">Debug-Orte erstellen</button><qr-code-display text.bind="text"></qr-code-display><div innerhtml.bind="text | newlinesToBr"></div></template>'})}(),System.register("debug.js",["qrcode","aurelia-framework","./data","./location"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h,i,j,k;return{setters:[function(a){d=a.qrcode},function(a){e=a.inject},function(a){f=a.Data},function(a){g=a.Location,h=a.NextLocation}],execute:function(){a("Debug",(i=e(f),k=i(j=function(){function a(b){c(this,a),this.text="Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.\nWhy do we use it?\n\nIt is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English. Many desktop publishing packages and web page editors now use Lorem Ipsum as their default model text, and a search for 'lorem ipsum' will uncover many web sites still in their infancy. Various versions have evolved over the years, sometimes by accident, sometimes on purpose (injected humour and the like).\n\nWhere does it come from?Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.\nWhy do we use it?[ENDE]",this.data=b}return a.prototype.createTestData=function(){var a=this.data.getLocations();a.push(new g(this.data.getNextLocationId(),"B","Berlin","Das Schloss","Ein paar Formatierungen: *Kursiv* und **fett**.\n\nUnd ein zweiter Absatz!",[new h("ans Wasser willst","Hamburg"),new h("zur Mitte möchtest","Kassel")])),a.push(new g(this.data.getNextLocationId(),"1","Hamburg","Am Hafen","Direkt am Wasser.")),a.push(new g(this.data.getNextLocationId(),"K","Kassel","Im Märchenwald","Die Mitte von allem."))},a}())||j)),a("Debug",k)}}}),function(){var a=System.amdDefine;a("dialog-cache-downloading.html!github:systemjs/plugin-text@0.0.8.js",[],function(){return'<template><ux-dialog><ux-dialog-body><h2>Es ist eine neue Version verfügbar!</h2>Neue Version wird heruntergeladen, bitte warten... <i class="fa fa-spinner fa-spin fa-2x"></i></ux-dialog-body><ux-dialog-footer><button class="btn-normal" click.trigger="dialogController.ok()">Meldung verbergen</button></ux-dialog-footer></ux-dialog></template>'})}(),System.register("dialog-cache-downloading.js",["aurelia-framework","aurelia-dialog"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h;return{setters:[function(a){d=a.inject},function(a){e=a.DialogController}],execute:function(){a("DialogCacheDownloading",(f=d(e),h=f(g=function(){function a(b){c(this,a),this.dialogController=b}return a.prototype.activate=function(a){this.data=a},a}())||g)),a("DialogCacheDownloading",h)}}}),function(){var a=System.amdDefine;a("dialog-cache-refresh.html!github:systemjs/plugin-text@0.0.8.js",[],function(){return'<template><ux-dialog><ux-dialog-body><h2>Es ist eine neue Version verfügbar!</h2>Bitte aktualisiere die Seite jetzt, um die neuste Version zu bekommen.</ux-dialog-body><ux-dialog-footer><button click.trigger="dialogController.ok()" class="btn-normal">Mache ich später selber</button> <button click.trigger="refresh()" class="btn-success">Seite jetzt aktualisieren</button></ux-dialog-footer></ux-dialog></template>'})}(),System.register("dialog-cache-refresh.js",["aurelia-framework","aurelia-dialog"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h;return{setters:[function(a){d=a.inject},function(a){e=a.DialogController}],execute:function(){a("DialogCacheRefresh",(f=d(e),h=f(g=function(){function a(b){c(this,a),this.dialogController=b}return a.prototype.activate=function(a){this.data=a},a.prototype.refresh=function(){location.reload()},a}())||g)),a("DialogCacheRefresh",h)}}}),function(){var a=System.amdDefine;a("dialog-confirmation.html!github:systemjs/plugin-text@0.0.8.js",[],function(){return'<template><ux-dialog><ux-dialog-body><h2><i class="fa fa-question-circle-o" aria-hidden="true"></i> ${data.title}</h2>${data.content}</ux-dialog-body><ux-dialog-footer><button click.trigger="dialogController.ok()" class.bind="data.okClass"><i class="fa ${data.okIcon}" aria-hidden="true"></i> ${data.ok}</button> <button click.trigger="dialogController.cancel()" class.bind="data.cancelClass"><i class="fa ${data.cancelIcon}" aria-hidden="true"></i> ${data.cancel}</button></ux-dialog-footer></ux-dialog></template>'})}(),function(){var a=System.amdDefine;a("dialog-info.html!github:systemjs/plugin-text@0.0.8.js",[],function(){return'<template><ux-dialog><ux-dialog-body><h2><i class="fa ${data.icon}" aria-hidden="true"></i> ${data.title}</h2></ux-dialog-body><ux-dialog-footer><button class="btn-normal" click.trigger="dialogController.ok()">Ok</button></ux-dialog-footer></ux-dialog></template>'})}(),function(){var a=System.amdDefine;a("game-info-editor.html!github:systemjs/plugin-text@0.0.8.js",[],function(){return'<template><form class="game-info-editor"><div class="form-group"><label for="name" class="control-label">Spiel-Name</label> <input type="text" value.bind="gameInfo.name" class="form-control" id="name" placeholder="Spiel-Name"></div><div class="form-group"><label for="starting-location" class="control-label">Startort</label> <input type="text" value.bind="gameInfo.startingLocation" class="form-control" id="starting-location" placeholder="Startort"></div></form></template>'})}(),System.register("game-info-editor.js",["./game-info","./data","aurelia-framework"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h,i;return{setters:[function(a){d=a.GameInfo},function(a){e=a.Data},function(a){f=a.inject}],execute:function(){a("GameInfoEditor",(g=f(e),i=g(h=function(){function a(b){c(this,a),this.data=b}return a.prototype.created=function(a,b){this.gameInfo=this.data.getGameInfo()},a}())||h)),a("GameInfoEditor",i)}}}),System.register("loading-indicator.js",["nprogress","aurelia-framework"],function(a,b){"use strict";function c(a,b,c,d){c&&Object.defineProperty(a,b,{enumerable:c.enumerable,configurable:c.configurable,writable:c.writable,value:c.initializer?c.initializer.call(d):void 0})}function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}var f,g,h,i,j,k,l,m;return{setters:[function(a){f=a},function(a){g=a.bindable,h=a.noView}],execute:function(){a("LoadingIndicator",(i=h(["nprogress/nprogress.css"]),m=i((k=function(){function a(){d(this,a),c(this,"loading",l,this)}return a.prototype.loadingChanged=function(a){a?f.start():f.done()},a}(),l=e(k.prototype,"loading",[g],{enumerable:!0,initializer:function(){return!1}}),j=k))||j)),a("LoadingIndicator",m)}}}),function(){var a=System.amdDefine;a("location-editor.html!github:systemjs/plugin-text@0.0.8.js",[],function(){return'<template><require from="value-converters"></require><require from="print-button"></require><require from="horsey/dist/horsey.css"></require><div class="panel panel-primary"><div class="panel-heading"><h3 class="panel-title">Orts-Editor</h3></div><div class="panel-body"><form role="form" class="form-horizontal"><div class="locationform"><div class="form-group"><label for="location-code" class="col-sm-2 control-label">Kürzel</label><div class="col-sm-10"><input type="text" value.bind="location.locationCode" input.delegate="locationCodeChanged()" class="form-control" id="location-code" placeholder="Kürzel"></div></div><div class="form-group"><label for="location-name" class="col-sm-2 control-label">Hängt bei</label><div class="col-sm-10"><input type="text" value.bind="location.locationName" input.delegate="locationNameChanged()" class="form-control" id="location-name" placeholder="dem realen Ort der hier eingegeben wird"></div></div><div class="form-group"><label for="scene-name" class="col-sm-2 control-label">Szenenname</label><div class="col-sm-10"><input type="text" value.bind="location.sceneName" input.delegate="updateQRCodeLength()" class="form-control" id="scene-name" placeholder="Fiktiver Szenenname"></div></div><div class="form-group"><label for="description" class="col-sm-2 control-label">Beschreibung</label><div class="col-sm-10"><textarea value.bind="location.description" input.delegate="updateQRCodeLength()" class="form-control" id="description" placeholder="Beschreibung der Szene" rows="4"></textarea><!--\r\n                            <h4>Vorschau</h4>\r\n                            <div class="well" innerhtml.bind="location.description | escapeHtml | markdown"></div>\r\n                            <div>Formatierungen: <i>*kursiv*</i>, <b>**fett**</b>, Leerzeile: Neuer Absatz.</div>\r\n                            --></div></div></div><div class="ifthen" repeat.for="nextLocation of location.nextLocations"><div class="form-group"><label for="next-location-decision-${$index}" class="col-sm-2 control-label">Wenn du:</label><div class="col-sm-8"><input type="text" value.bind="nextLocation.decision" input.delegate="updateQRCodeLength()" class="form-control" id="next-location-decision-${$index}" placeholder="das hier möchtest"></div><div class="col-sm-2 ifthen-button-line ifthen-button-line-one"><button click.trigger="moveNextLocationUp($index)"><i class="fa fa-arrow-up" aria-hidden="true"></i></button> <button click.trigger="moveNextLocationDown($index)"><i class="fa fa-arrow-down" aria-hidden="true"></i></button> <button click.trigger="removeNextLocation($index)"><i class="fa fa-trash-o" aria-hidden="true"></i></button></div></div><div class="form-group"><label for="next-location-location-name-${$index}" class="col-sm-2 control-label">...dann gehe zu:</label><div class="col-sm-8"><input type="text" value.bind="nextLocation.locationName" input.delegate="updateNextLocationTarget($index)" class="form-control ${(getNextLocationTarget($index) ? \'next-location-found\' : \'next-location-not-found\') & signal:\'update-next-location-target\'}" id="next-location-location-name-${$index}" placeholder="diesem Ort, an dem der nächste Zettel hängt"></div><div class="col-sm-2 ifthen-button-line"><button click.trigger="nextLocationTargetClicked($index)"><i class="fa ${(getNextLocationTarget($index) ? \'fa-arrow-right\' : \'fa-plus\') & signal:\'update-next-location-target\'}" aria-hidden="true"></i></button></div></div></div><div class="addIfThen"><button click.trigger="addNextLocation()"><i class="fa fa-plus-circle" aria-hidden="true"></i> Weitere Möglichkeit</button><div class="well ${qrCodeClass & signal:\'update-qr-code-length\'}">QR-Code-Länge: ${qrCodeLength & signal:\'update-qr-code-length\'} (${qrCodeAnalysis & signal:\'update-qr-code-length\'})</div></div></form></div></div><div class="panel panel-primary"><div class="panel-heading"><h3 class="panel-title">Werkzeuge</h3></div><div class="panel-body"><div class="toolbar toolbar-three-buttons"><a route-href="route: location-qr-code-display; params.bind: {id:location.id}" class="toolbar-button"><button><i class="fa fa-qrcode" aria-hidden="true"></i> QR-Code anzeigen</button></a><print-button location.bind="location" label="QR-Code drucken" class="toolbar-button"></print-button><div class="toolbar-button"><button click.trigger="deleteLocation()" class="btn-danger location-editor-delete-button"><i class="fa fa-trash-o" aria-hidden="true"></i> Ort löschen</button></div></div></div></div></template>'})}(),System.register("vendor/horsey-modified.js",[],function(a,b){"use strict";var c;return{setters:[],execute:function(){c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},function(a){if("object"===("undefined"==typeof exports?"undefined":c(exports))&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.horsey=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){function d(a){return a&&a.__esModule?a:{default:a}}function e(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function f(a){function b(a){return!!d.noMatches&&a.query.length}function c(b,c){function e(b,d){b&&(console.log("Autocomplete source error.",b,a),c(b,[]));var e=Array.isArray(d)?d:[];v&&(k[h]={created:new Date,items:e}),A=e,c(null,e.slice())}var f=b.query,g=b.limit;if(!d.blankSearch&&0===f.length)return void c(null,[],!0);D&&D.emit("beforeUpdate");var h=(0,n.default)(f);if(v){var i=k[h];if(i){var j=i.created.getTime(),l=k.duration||86400,p=1e3*l,q=new Date(j+p)>new Date;if(q)return void c(null,i.items.slice())}}var r={previousSuggestions:A.slice(),previousSelection:B,input:f,renderItem:m,renderCategory:o,limit:g};"function"==typeof d.source?d.source(r,e):e(null,d.source)}var d=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],e=d.setAppends,f=d.set,h=d.filter,i=d.source,j=d.cache,k=void 0===j?{}:j,l=d.predictNextSearch,m=d.renderItem,o=d.renderCategory,p=d.blankSearch,q=d.appendTo,r=d.anchor,s=d.highlighter,t=d.highlightCompleteWords,u=d.debounce,v=d.cache!==!1;if(i){var w=d.getText,x=d.getValue,y="string"==typeof w?function(a){return a[w]}:"function"==typeof w?w:function(a){return a.toString()},z="string"==typeof x?function(a){return a[x]}:"function"==typeof x?x:function(a){return a},A=[],B=null,C=Number(d.limit)||1/0,D=g(a,{source:c,limit:C,getText:y,getValue:z,setAppends:e,predictNextSearch:l,renderItem:m,renderCategory:o,appendTo:q,anchor:r,noMatches:b,highlighter:s,highlightCompleteWords:t,noMatchesText:d.noMatches,blankSearch:p,debounce:u,set:function(b){e!==!0&&(a.value=""),B=b,(f||D.defaultSetter)(y(b),b),D.emit("afterSet")},filter:h});return D}}function g(a){function b(a){ba(!0),Pa=Za.attachment=a,Ra="INPUT"===Pa.tagName||"TEXTAREA"===Pa.tagName,Sa=Ra||l(Pa),ba()}function c(){Oa&&Oa.refresh()}function d(a){function b(b,c,d){La.counter===e&&(f(c,a),(b||d)&&(Ya=!1))}if("function"==typeof ta){x.default.remove(Pa,"focus",d);var c=m();if(c!==La.query){Ya=!1,La.query=c;var e=++La.counter;ta({query:c,limit:Fa},b)}}}function f(a,b){g(),Ya=!0,Za.source=[],a.forEach(function(a){return a.list.forEach(function(b){return o(b,a)})}),b&&M(),X()}function g(){for(Q();Ia.lastChild;)Ia.removeChild(Ia.lastChild);Ma=Object.create(null),Ya=!1}function m(){return(Ra?a.value:a.innerHTML).trim()}function n(a){function b(){var b=i("div","sey-category"),c=i("ul","sey-list");return Da(b,a),b.appendChild(c),Ia.appendChild(b),{data:a,ul:c}}return a.id||(a.id="default"),Ma[a.id]||(Ma[a.id]=b()),Ma[a.id]}function o(b,c){function d(){P(j)}function e(){var c=qa(b);w(b),S(),Pa.focus(),Va=oa.predictNextSearch&&oa.predictNextSearch({input:c,source:Za.source.slice(),selection:b})||"",Va&&(a.value=Va,a.select(),M(),X())}function f(){var a=m();y(a,b)?j.className=j.className.replace(/ sey-hide/g,""):x.default.fabricate(j,"horsey-hide")}function g(){L(j)||(j.className+=" sey-hide",Na===j&&Q())}var h=n(c),j=i("li","sey-item");return Ba(j,b),xa&&q(j),x.default.add(j,"mouseenter",d),x.default.add(j,"click",e),x.default.add(j,"horsey-filter",f),x.default.add(j,"horsey-hide",g),h.ul.appendChild(j),Za.source.push(b),j}function q(a){u(a).forEach(function(a){function b(a){var b=I.createElement("span");return b.className="sey-char",b.textContent=b.innerText=a,b}var c=a.parentElement,d=a.textContent||a.nodeValue||"";if(0!==d.length){var e=!0,f=!1,g=void 0;try{for(var h,i=d[Symbol.iterator]();!(e=(h=i.next()).done);e=!0){var j=h.value;c.insertBefore(b(j),a)}}catch(a){f=!0,g=a}finally{try{!e&&i.return&&i.return()}finally{if(f)throw g}}c.removeChild(a)}})}function s(a,b){function c(){m=l.map(function(a){return a.innerText||a.textContent})}function d(){var a=!0,d=!1,e=void 0;try{for(var f,g=k[Symbol.iterator]();!(a=(f=g.next()).done);a=!0){var i=f.value,j=n;a:for(;j!==-1;){var o=!0,p=j,q=!0,r=!1,s=void 0;try{for(var t,u=i[Symbol.iterator]();!(q=(t=u.next()).done);q=!0){var v=t.value,w=m.indexOf(v,p+1),x=w===-1||!o&&p+1!==w;if(o&&(o=!1,j=w),x)continue a;p=w}}catch(a){r=!0,s=a}finally{try{!q&&u.return&&u.return()}finally{if(r)throw s}}var y=!0,z=!1,A=void 0;try{for(var B,C=l.splice(j,1+p-j)[Symbol.iterator]();!(y=(B=C.next()).done);y=!0){var D=B.value;h(D)}}catch(a){z=!0,A=a}finally{try{!y&&C.return&&C.return()}finally{if(z)throw A}}c(),b=b.replace(i,"");break}}}catch(a){d=!0,e=a}finally{try{!a&&g.return&&g.return()}finally{if(d)throw e}}}function f(){var a=!0,c=!1,d=void 0;try{for(var e,f=b[Symbol.iterator]();!(a=(e=f.next()).done);a=!0)for(var g=e.value;l.length;){var j=l.shift();if((j.innerText||j.textContent)===g){h(j);break}i(j)}}catch(a){c=!0,d=a}finally{try{!a&&f.return&&f.return()}finally{if(c)throw d}}}function g(){for(;l.length;)i(l.shift())}function h(a){a.classList.add("sey-char-highlight")}function i(a){a.classList.remove("sey-char-highlight")}var j=/[\s,._\[\]{}()-]/g,k=b.split(j).filter(function(a){return a.length}),l=[].concat(e(a.querySelectorAll(".sey-char"))),m=void 0,n=0;c(),za&&d(),f(),g()}function u(a){for(var b=[],c=document.createTreeWalker(a,NodeFilter.SHOW_TEXT,null,!1),d=void 0;d=c.nextNode();)b.push(d);return b}function w(a){return oa.anchor?(A()?Za.appendText:Za.appendHTML)(ra(a)):void Ha(a)}function y(a,b){if(oa.anchor){var c=(A()?Za.filterAnchoredText:Za.filterAnchoredHTML)(a,b);return!!c&&Ga(c.input,c.suggestion)}return Ga(a,b)}function A(){return h(Pa)}function K(){return Ja.className.indexOf("sey-show")!==-1}function L(a){return a.className.indexOf("sey-hide")!==-1}function M(){Oa.refresh(),K()||(Ja.className+=" sey-show",x.default.fabricate(Pa,"horsey-show"))}function N(a){var b=1===a.which&&!a.metaKey&&!a.ctrlKey;b!==!1&&O()}function O(){K()?S():M()}function P(a){Q(),a&&(Na=a,Na.className+=" sey-selected")}function Q(){Na&&(Na.className=Na.className.replace(/ sey-selected/g,""),Na=null)}function R(a,b){function c(a){for(;a;){if(r.default.matchesSelector(a.parentElement,".sey-category"))return a.parentElement;a=a.parentElement}return null}function d(){if(Na){if(Na[h])return Na[h];if(f[h]&&ma(f[h])[g])return ma(f[h])[g]}return ma(Ia[g])[g]}var e=Za.source.length;if(0!==e){if(b>e)return void Q();var f=c(Na)||Ia.firstChild,g=a?"lastChild":"firstChild",h=a?"previousSibling":"nextSibling",i=d();P(i),L(i)&&R(a,b?b+1:1)}}function S(){Oa.sleep(),Ja.className=Ja.className.replace(/ sey-show/g,""),Q(),x.default.fabricate(Pa,"horsey-hide"),a.value===Va&&(a.value="")}function T(a){var b=K(),c=a.which||a.keyCode;c===G?(Sa&&oa.autoShowOnUpDown&&M(),b&&(R(),U(a))):c===F?(Sa&&oa.autoShowOnUpDown&&M(),b&&(R(!0),U(a))):c===C?Sa&&oa.autoShowOnUpDown&&M():b&&(c===D?(Na?x.default.fabricate(Na,"click"):S(),U(a)):c===E&&(S(),U(a)))}function U(a){a.stopPropagation(),a.preventDefault()}function V(){Qa&&Qa.classList.remove("sey-hide")}function W(){Qa&&Qa.classList.add("sey-hide")}function X(){function a(){for(var a=Ia.firstChild,c=0;a;){var d=ma(a),e=b(d);0===e?a.classList.add("sey-hide"):a.classList.remove("sey-hide"),c+=e,a=a.nextSibling}return c}function b(a){for(var b=a.firstChild,d=0;b;)d>=Fa?x.default.fabricate(b,"horsey-hide"):(x.default.fabricate(b,"horsey-filter"),b.className.indexOf("sey-hide")===-1&&(d++,xa&&s(b,c))),b=b.nextSibling;return d}if(K()){Xa(!0),x.default.fabricate(Pa,"horsey-filter");var c=m();if(!oa.blankSearch&&!c)return void S();var d=ua({query:c}),e=a();0===e&&d&&Ya?V():W(),Na||R(),Na||d||S()}}function Y(a){var b=a.which||a.keyCode;b!==D&&Ka()}function Z(a){var b=a.which||a.keyCode;b!==D&&b!==H&&setTimeout(M,0)}function $(a){var b=a.target;if(b===Pa)return!0;for(;b;){if(b===Ja||b===Pa)return!0;b=b.parentNode}}function _(a){var b=a.which||a.keyCode;b===H&&S()}function aa(a){$(a)||S()}function ba(a){var b=a?"remove":"add";Oa&&(Oa.destroy(),Oa=null),a||(Oa=(0,v.default)(Ja,Pa,{caret:Sa&&"INPUT"!==Pa.tagName,context:oa.appendTo}),K()||Oa.sleep()),a||Sa&&I.activeElement!==Pa?x.default[b](Pa,"focus",d):d(),Sa?(x.default[b](Pa,"keypress",Z),x.default[b](Pa,"keypress",Ka),x.default[b](Pa,"keydown",Y),x.default[b](Pa,"paste",Ka),x.default[b](Pa,"keydown",T),oa.autoHideOnBlur&&x.default[b](Pa,"keydown",_)):(x.default[b](Pa,"click",N),x.default[b](J,"keydown",T)),oa.autoHideOnClick&&x.default[b](I,"click",aa),sa&&x.default[b](sa,"submit",S)}function ca(){ba(!0),pa.contains(Ja)&&pa.removeChild(Ja)}function da(b){Ra?Ea===!0?a.value+=" "+b:a.value=b:Ea===!0?a.innerHTML+=" "+b:a.innerHTML=b}function ea(a,b){k(a,qa(b))}function fa(a,b){if("default"!==b.id){var c=i("div","sey-category-id");a.appendChild(c),k(c,b.id)}}function ga(a,b){var c=a.toLowerCase(),d=qa(b)||"";if((0,z.default)(c,d.toLowerCase()))return!0;var e=ra(b)||"";return"string"==typeof e&&(0,z.default)(c,e.toLowerCase())}function ha(a,b){for(var c="",d=!1,e=b.start;d===!1&&e>=0;)c=a.substr(e-1,b.start-e+1),d=Ta.test(c),e--;return{text:d?c:null,start:e}}function ia(b,c){var d=(0,p.default)(a),e=ha(b,d).text;if(e)return{input:e,suggestion:c}}function ja(b){var c=a.value,d=(0,p.default)(a),e=ha(c,d),f=c.substr(0,e.start),g=c.substr(e.start+e.text.length+(d.end-d.start)),h=f+b+" ";a.value=h+g,(0,p.default)(a,{start:h.length,end:h.length})}function ka(){throw new Error("Anchoring in editable elements is disabled by default.")}function la(){throw new Error("Anchoring in editable elements is disabled by default.")}function ma(a){return(0,r.default)(".sey-list",a)[0]}var na=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],oa=na,pa=oa.appendTo||I.body,qa=oa.getText,ra=oa.getValue,sa=oa.form,ta=oa.source,ua=oa.noMatches,va=oa.noMatchesText,wa=oa.highlighter,xa=void 0===wa||wa,ya=oa.highlightCompleteWords,za=void 0===ya||ya,Aa=oa.renderItem,Ba=void 0===Aa?ea:Aa,Ca=oa.renderCategory,Da=void 0===Ca?fa:Ca,Ea=oa.setAppends,Fa="number"==typeof oa.limit?oa.limit:1/0,Ga=oa.filter||ga,Ha=oa.set||da,Ia=i("div","sey-categories"),Ja=i("div","sey-container"),Ka=j(X),La={counter:0,query:null},Ma=Object.create(null),Na=null,Oa=void 0,Pa=a,Qa=void 0,Ra=void 0,Sa=void 0,Ta=void 0,Ua=void 0,Va="",Wa=oa.debounce||300,Xa=(0,B.default)(d,Wa);void 0===oa.autoHideOnBlur&&(oa.autoHideOnBlur=!0),void 0===oa.autoHideOnClick&&(oa.autoHideOnClick=!0),void 0===oa.autoShowOnUpDown&&(oa.autoShowOnUpDown="INPUT"===a.tagName),oa.anchor&&(Ta=new RegExp("^"+oa.anchor),Ua=new RegExp(oa.anchor+"$"));var Ya=!1,Za=(0,t.default)({anchor:oa.anchor,clear:g,show:M,hide:S,toggle:O,destroy:ca,refreshPosition:c,appendText:ja,appendHTML:la,filterAnchoredText:ia,filterAnchoredHTML:ka,defaultAppendText:ja,defaultFilter:ga,defaultItemRenderer:ea,defaultCategoryRenderer:fa,defaultSetter:da,retarget:b,attachment:Pa,source:[]});return b(a),Ja.appendChild(Ia),ua&&va&&(Qa=i("div","sey-empty sey-hide"),k(Qa,va),Ja.appendChild(Qa)),pa.appendChild(Ja),a.setAttribute("autocomplete","off"),Array.isArray(ta)&&f(ta,!1),Za}function h(a){return"INPUT"===a.tagName||"TEXTAREA"===a.tagName}function i(a,b){var c=I.createElement(a);return c.className=b,c}function j(a){return function(){setTimeout(a,0)}}function k(a,b){a.innerText=a.textContent=b}function l(a){var b=a.getAttribute("contentEditable");return"false"!==b&&("true"===b||!!a.parentElement&&l(a.parentElement))}var m=a("hash-sum"),n=d(m),o=a("sell"),p=d(o),q=a("sektor"),r=d(q),s=a("contra/emitter"),t=d(s),u=a("bullseye"),v=d(u),w=a("crossvent"),x=d(w),y=a("fuzzysearch"),z=d(y),A=a("lodash/debounce"),B=d(A),C=8,D=13,E=27,F=38,G=40,H=9,I=document,J=I.documentElement;b.exports=f},{bullseye:3,"contra/emitter":7,crossvent:8,fuzzysearch:11,"hash-sum":12,"lodash/debounce":13,sektor:20,sell:29}],2:[function(a,b,c){b.exports=function(a,b){return Array.prototype.slice.call(a,b)}},{}],3:[function(a,b,c){function d(a,b,c){function d(){q.sleeping=!0}function h(){return i()}function i(a){var c=b.getBoundingClientRect(),d=document.body.scrollTop||document.documentElement.scrollTop;return r?(a=r.read(),{x:(a.absolute?0:c.left)+a.x,y:(a.absolute?0:c.top)+d+a.y+20}):{x:c.left,y:c.top+d}}function j(a){k(a)}function k(c){if(o)throw new Error("Bullseye can't refresh after being destroyed. Create another instance instead.");if(r&&!c)return q.sleeping=!1,void r.refresh();var d=i(c);r||b===a||(d.y+=b.offsetHeight);var e=m.context;a.style.left=d.x+"px",a.style.top=(e?e.offsetHeight:d.y)+"px"}function l(){r&&r.destroy(),e.remove(window,"resize",p),o=!0}var m=c,n=b&&b.tagName;n||2!==arguments.length||(m=b),n||(b=a),m||(m={});var o=!1,p=f(k,30),q={update:m.autoupdateToCaret!==!1&&j},r=m.caret&&g(b,q);return k(),m.tracking!==!1&&e.add(window,"resize",p),{read:h,refresh:k,destroy:l,sleep:d}}var e=a("crossvent"),f=a("./throttle"),g=a("./tailormade");b.exports=d},{"./tailormade":4,"./throttle":5,crossvent:8}],4:[function(a,b,c){(function(c){function d(a,b){function c(){}function d(){return(v?n:o)()}function g(){if(!x.sleeping)return(x.update||c)(d())}function n(){var b=e(a),c=r(),d=p(c,b.start);return l.body.removeChild(c.mirror),d}function o(){var a=i();if(a.rangeCount){var b=a.getRangeAt(0),c="P"===b.startContainer.nodeName&&0===b.startOffset;if(c)return{x:b.startContainer.offsetLeft,y:b.startContainer.offsetTop,absolute:!0};if(b.getClientRects){var d=b.getClientRects();if(d.length>0)return{x:d[0].left,y:d[0].top,absolute:!0}}}return{x:0,y:0}}function p(b,c){var d=l.createElement("span"),e=b.mirror,f=b.computed;return s(e,q(a).substring(0,c)),"INPUT"===a.tagName&&(e.textContent=e.textContent.replace(/\s/g," ")),s(d,q(a).substring(c)||"."),e.appendChild(d),{x:d.offsetLeft+parseInt(f.borderLeftWidth),y:d.offsetTop+parseInt(f.borderTopWidth)}}function q(a){return v?a.value:a.innerHTML}function r(){function b(a){e[a]=c[a]}var c=k.getComputedStyle?getComputedStyle(a):a.currentStyle,d=l.createElement("div"),e=d.style;
return l.body.appendChild(d),"INPUT"!==a.tagName&&(e.wordWrap="break-word"),e.whiteSpace="pre-wrap",e.position="absolute",e.visibility="hidden",j.forEach(b),m?(e.width=parseInt(c.width)-2+"px",a.scrollHeight>parseInt(c.height)&&(e.overflowY="scroll")):e.overflow="hidden",{mirror:d,computed:c}}function s(a,b){v?a.textContent=b:a.innerHTML=b}function t(b){var c=b?"remove":"add";f[c](a,"keydown",w),f[c](a,"keyup",w),f[c](a,"input",w),f[c](a,"paste",w),f[c](a,"change",w)}function u(){t(!0)}var v="INPUT"===a.tagName||"TEXTAREA"===a.tagName,w=h(g,30),x=b||{};return t(),{read:d,refresh:w,destroy:u}}var e=a("sell"),f=a("crossvent"),g=a("seleccion"),h=a("./throttle"),i=g.get,j=["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing"],k=c,l=document,m=null!==k.mozInnerScreenX&&void 0!==k.mozInnerScreenX;b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./throttle":5,crossvent:8,seleccion:27,sell:29}],5:[function(a,b,c){function d(a,b){var c,d=-(1/0);return function(){function e(){clearTimeout(c),c=null;var f=d+b,g=Date.now();g>f?(d=g,a()):c=setTimeout(e,f-g)}c||e()}}b.exports=d},{}],6:[function(a,b,c){var d=a("ticky");b.exports=function(a,b,c){a&&d(function(){a.apply(c||null,b||[])})}},{ticky:30}],7:[function(a,b,c){var d=a("atoa"),e=a("./debounce");b.exports=function(a,b){var c=b||{},f={};return void 0===a&&(a={}),a.on=function(b,c){return f[b]?f[b].push(c):f[b]=[c],a},a.once=function(b,c){return c._once=!0,a.on(b,c),a},a.off=function(b,c){var d=arguments.length;if(1===d)delete f[b];else if(0===d)f={};else{var e=f[b];if(!e)return a;e.splice(e.indexOf(c),1)}return a},a.emit=function(){var b=d(arguments);return a.emitterSnapshot(b.shift()).apply(this,b)},a.emitterSnapshot=function(b){var g=(f[b]||[]).slice(0);return function(){var f=d(arguments),h=this||a;if("error"===b&&c.throws!==!1&&!g.length)throw 1===f.length?f[0]:f;return g.forEach(function(d){c.async?e(d,f,h):d.apply(h,f),d._once&&a.off(b,d)}),a}},a}},{"./debounce":6,atoa:2}],8:[function(a,b,c){(function(c){function d(a,b,c,d){return a.addEventListener(b,c,d)}function e(a,b,c){return a.attachEvent("on"+b,j(a,b,c))}function f(a,b,c,d){return a.removeEventListener(b,c,d)}function g(a,b,c){var d=k(a,b,c);if(d)return a.detachEvent("on"+b,d)}function h(a,b,c){function d(){var a;return o.createEvent?(a=o.createEvent("Event"),a.initEvent(b,!0,!0)):o.createEventObject&&(a=o.createEventObject()),a}function e(){return new m(b,{detail:c})}var f=n.indexOf(b)===-1?e():d();a.dispatchEvent?a.dispatchEvent(f):a.fireEvent("on"+b,f)}function i(a,b,d){return function(b){var e=b||c.event;e.target=e.target||e.srcElement,e.preventDefault=e.preventDefault||function(){e.returnValue=!1},e.stopPropagation=e.stopPropagation||function(){e.cancelBubble=!0},e.which=e.which||e.keyCode,d.call(a,e)}}function j(a,b,c){var d=k(a,b,c)||i(a,b,c);return r.push({wrapper:d,element:a,type:b,fn:c}),d}function k(a,b,c){var d=l(a,b,c);if(d){var e=r[d].wrapper;return r.splice(d,1),e}}function l(a,b,c){var d,e;for(d=0;d<r.length;d++)if(e=r[d],e.element===a&&e.type===b&&e.fn===c)return d}var m=a("custom-event"),n=a("./eventmap"),o=c.document,p=d,q=f,r=[];c.addEventListener||(p=e,q=g),b.exports={add:p,remove:q,fabricate:h}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./eventmap":9,"custom-event":10}],9:[function(a,b,c){(function(a){var c=[],d="",e=/^on/;for(d in a)e.test(d)&&c.push(d.slice(2));b.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],10:[function(a,b,c){(function(a){function c(){try{var a=new d("cat",{detail:{foo:"bar"}});return"cat"===a.type&&"bar"===a.detail.foo}catch(a){}return!1}var d=a.CustomEvent;b.exports=c()?d:"function"==typeof document.createEvent?function(a,b){var c=document.createEvent("CustomEvent");return b?c.initCustomEvent(a,b.bubbles,b.cancelable,b.detail):c.initCustomEvent(a,!1,!1,void 0),c}:function(a,b){var c=document.createEventObject();return c.type=a,b?(c.bubbles=Boolean(b.bubbles),c.cancelable=Boolean(b.cancelable),c.detail=b.detail):(c.bubbles=!1,c.cancelable=!1,c.detail=void 0),c}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],11:[function(a,b,c){function d(a,b){var c=b.length,d=a.length;if(d>c)return!1;if(d===c)return a===b;a:for(var e=0,f=0;e<d;e++){for(var g=a.charCodeAt(e);f<c;)if(b.charCodeAt(f++)===g)continue a;return!1}return!0}b.exports=d},{}],12:[function(a,b,d){function e(a,b){for(;a.length<b;)a="0"+a;return a}function f(a,b){var c,d,e;if(0===b.length)return a;for(c=0,e=b.length;c<e;c++)d=b.charCodeAt(c),a=(a<<5)-a+d,a|=0;return a<0?a*-2:a}function g(a,b,c){function d(a,d){return h(a,b[d],d,c)}return Object.keys(b).sort().reduce(d,a)}function h(a,b,d,e){var h=f(f(f(a,d),i(b)),"undefined"==typeof b?"undefined":c(b));return null===b?f(h,"null"):void 0===b?f(h,"undefined"):"object"===("undefined"==typeof b?"undefined":c(b))?e.indexOf(b)!==-1?f(h,"[Circular]"+d):(e.push(b),g(h,b,e)):f(h,b.toString())}function i(a){return Object.prototype.toString.call(a)}function j(a){return e(h(0,a,"",[]).toString(16),8)}b.exports=j},{}],13:[function(a,b,c){function d(a,b,c){function d(b){var c=s,d=t;return s=t=void 0,y=b,v=a.apply(d,c)}function k(a){return y=a,w=setTimeout(n,b),z?d(a):v}function l(a){var c=a-x,d=a-y,e=b-c;return A?j(e,u-d):e}function m(a){var c=a-x,d=a-y;return void 0===x||c>=b||c<0||A&&d>=u}function n(){var a=f();return m(a)?o(a):void(w=setTimeout(n,l(a)))}function o(a){return w=void 0,B&&s?d(a):(s=t=void 0,v)}function p(){y=0,s=x=t=w=void 0}function q(){return void 0===w?v:o(f())}function r(){var a=f(),c=m(a);if(s=arguments,t=this,x=a,c){if(void 0===w)return k(x);if(A)return w=setTimeout(n,b),d(x)}return void 0===w&&(w=setTimeout(n,b)),v}var s,t,u,v,w,x,y=0,z=!1,A=!1,B=!0;if("function"!=typeof a)throw new TypeError(h);return b=g(b)||0,e(c)&&(z=!!c.leading,A="maxWait"in c,u=A?i(g(c.maxWait)||0,b):u,B="trailing"in c?!!c.trailing:B),r.cancel=p,r.flush=q,r}var e=a("./isObject"),f=a("./now"),g=a("./toNumber"),h="Expected a function",i=Math.max,j=Math.min;b.exports=d},{"./isObject":15,"./now":18,"./toNumber":19}],14:[function(a,b,c){function d(a){var b=e(a)?i.call(a):"";return b==f||b==g}var e=a("./isObject"),f="[object Function]",g="[object GeneratorFunction]",h=Object.prototype,i=h.toString;b.exports=d},{"./isObject":15}],15:[function(a,b,d){function e(a){var b="undefined"==typeof a?"undefined":c(a);return!!a&&("object"==b||"function"==b)}b.exports=e},{}],16:[function(a,b,d){function e(a){return!!a&&"object"==("undefined"==typeof a?"undefined":c(a))}b.exports=e},{}],17:[function(a,b,d){function e(a){return"symbol"==("undefined"==typeof a?"undefined":c(a))||f(a)&&i.call(a)==g}var f=a("./isObjectLike"),g="[object Symbol]",h=Object.prototype,i=h.toString;b.exports=e},{"./isObjectLike":16}],18:[function(a,b,c){function d(){return Date.now()}b.exports=d},{}],19:[function(a,b,c){function d(a){if("number"==typeof a)return a;if(g(a))return h;if(f(a)){var b=e(a.valueOf)?a.valueOf():a;a=f(b)?b+"":b}if("string"!=typeof a)return 0===a?a:+a;a=a.replace(i,"");var c=k.test(a);return c||l.test(a)?m(a.slice(2),c?2:8):j.test(a)?h:+a}var e=a("./isFunction"),f=a("./isObject"),g=a("./isSymbol"),h=NaN,i=/^\s+|\s+$/g,j=/^[-+]0x[0-9a-f]+$/i,k=/^0b[01]+$/i,l=/^0o[0-7]+$/i,m=parseInt;b.exports=d},{"./isFunction":14,"./isObject":15,"./isSymbol":17}],20:[function(a,b,c){(function(a){function c(a,b){var c,d,e,f,g,k=b!==j;k&&(c=b.getAttribute("id"),d=c||h,e="#"+d+" ",f=e+a.replace(/,/g,","+e),g=i.test(a)&&b.parentNode,c||b.setAttribute("id",d));try{return(g||b).querySelectorAll(f||a)}catch(a){return[]}finally{null===c&&b.removeAttribute("id")}}function d(a,b,d,e){var g,h=b||j,i=d||[],k=0;if("string"!=typeof a)return i;if(1!==h.nodeType&&9!==h.nodeType)return[];if(e)for(;g=e[k++];)f(g,a)&&i.push(g);else i.push.apply(i,c(a,h));return i}function e(a,b){return d(a,null,null,b)}function f(a,b){return l.call(a,b)}function g(){return!1}var h="sektor-"+Date.now(),i=/[+~]/,j=a.document,k=j.documentElement||{},l=k.matches||k.webkitMatchesSelector||k.mozMatchesSelector||k.oMatchesSelector||k.msMatchesSelector||g;b.exports=d,d.matches=e,d.matchesSelector=f}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],21:[function(a,b,d){(function(d){var e,f=d.document,g=a("./getSelectionRaw"),h=a("./getSelectionNullOp"),i=a("./getSelectionSynthetic"),j=a("./isHost");e=j.method(d,"getSelection")?g:"object"===c(f.selection)&&f.selection?i:h,b.exports=e}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./getSelectionNullOp":22,"./getSelectionRaw":23,"./getSelectionSynthetic":24,"./isHost":25}],22:[function(a,b,c){function d(){}function e(){return{removeAllRanges:d,addRange:d}}b.exports=e},{}],23:[function(a,b,c){(function(a){function c(){return a.getSelection()}b.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],24:[function(a,b,c){(function(c){function d(a){var b=this,c=a.createRange();this._selection=a,this._ranges=[],"Control"===a.type?m(b):k(c)?l(b,c):h(b)}function e(a,b){for(var c,d=t.createControlRange(),e=0,f=b.length;e<f;++e){c=j(b[e]);try{d.add(c)}catch(a){throw new Error("setRanges(): Element could not be added to control selection")}}d.select(),m(a)}function f(a,b){var c=a.getAllRanges();a.removeAllRanges();for(var d=0,e=c.length;d<e;++d)o(b,c[d])||a.addRange(c[d]);a.rangeCount||h(a)}function g(a,b){var c="start",d="end";a.anchorNode=b[c+"Container"],a.anchorOffset=b[c+"Offset"],a.focusNode=b[d+"Container"],a.focusOffset=b[d+"Offset"]}function h(a){a.anchorNode=a.focusNode=null,a.anchorOffset=a.focusOffset=0,a.rangeCount=0,a.isCollapsed=!0,a._ranges.length=0}function i(a){if(!a.length||1!==a[0].nodeType)return!1;for(var b=1,c=a.length;b<c;++b)if(!p(a[0],a[b]))return!1;return!0}function j(a){var b=a.getNodes();if(!i(b))throw new Error("getSingleElementFromRange(): range did not consist of a single element");return b[0]}function k(a){return a&&void 0!==a.text}function l(a,b){a._ranges=[b],g(a,b,!1),a.rangeCount=1,a.isCollapsed=b.collapsed}function m(a){if(a._ranges.length=0,"None"===a._selection.type)h(a);else{var b=a._selection.createRange();if(k(b))l(a,b);else{a.rangeCount=b.length;for(var c,d=0;d<a.rangeCount;++d)c=s.createRange(),c.selectNode(b.item(d)),a._ranges.push(c);a.isCollapsed=1===a.rangeCount&&a._ranges[0].collapsed,g(a,a._ranges[a.rangeCount-1],!1)}}}function n(a,b){for(var c=a._selection.createRange(),d=j(b),e=t.createControlRange(),f=0,g=c.length;f<g;++f)e.add(c.item(f));try{e.add(d)}catch(a){throw new Error("addRange(): Element could not be added to control selection")}e.select(),m(a)}function o(a,b){return a.startContainer===b.startContainer&&a.startOffset===b.startOffset&&a.endContainer===b.endContainer&&a.endOffset===b.endOffset}function p(a,b){for(var c=b;c.parentNode;){if(c.parentNode===a)return!0;c=c.parentNode}return!1}function q(){return new d(c.document.selection)}var r=a("./rangeToTextRange"),s=c.document,t=s.body,u=d.prototype;u.removeAllRanges=function(){var a;try{this._selection.empty(),"None"!==this._selection.type&&(a=t.createTextRange(),a.select(),this._selection.empty())}catch(a){}h(this)},u.addRange=function(a){"Control"===this._selection.type?n(this,a):(r(a).select(),this._ranges[0]=a,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,g(this,a,!1))},u.setRanges=function(a){this.removeAllRanges();var b=a.length;b>1?e(this,a):b&&this.addRange(a[0])},u.getRangeAt=function(a){if(a<0||a>=this.rangeCount)throw new Error("getRangeAt(): index out of bounds");return this._ranges[a].cloneRange()},u.removeRange=function(a){if("Control"!==this._selection.type)return void f(this,a);for(var b,c=this._selection.createRange(),d=j(a),e=t.createControlRange(),g=!1,h=0,i=c.length;h<i;++h)b=c.item(h),b!==d||g?e.add(c.item(h)):g=!0;e.select(),m(this)},u.eachRange=function(a,b){var c=0,d=this._ranges.length;for(c=0;c<d;++c)if(a(this.getRangeAt(c)))return b},u.getAllRanges=function(){var a=[];return this.eachRange(function(b){a.push(b)}),a},u.setSingleRange=function(a){this.removeAllRanges(),this.addRange(a)},b.exports=q}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./rangeToTextRange":26}],25:[function(a,b,d){function e(a,b){var d=c(a[b]);return"function"===d||!("object"!==d||!a[b])||"unknown"===d}function f(a,b){return"undefined"!=typeof a[b]}function g(a){return function(b,c){for(var d=c.length;d--;)if(!a(b,c[d]))return!1;return!0}}b.exports={method:e,methods:g(e),property:f,properties:g(f)}},{}],26:[function(a,b,c){(function(a){function c(a){if(a.collapsed)return e({node:a.startContainer,offset:a.startOffset},!0);var b=e({node:a.startContainer,offset:a.startOffset},!0),c=e({node:a.endContainer,offset:a.endOffset},!1),d=g.createTextRange();return d.setEndPoint("StartToStart",b),d.setEndPoint("EndToEnd",c),d}function d(a){var b=a.nodeType;return 3===b||4===b||8===b}function e(a,b){var c,e,h,i,j=a.offset,k=g.createTextRange(),l=d(a.node);return l?(c=a.node,e=c.parentNode):(i=a.node.childNodes,c=j<i.length?i[j]:null,e=a.node),h=f.createElement("span"),h.innerHTML="&#feff;",c?e.insertBefore(h,c):e.appendChild(h),k.moveToElementText(h),k.collapse(!b),e.removeChild(h),l&&k[b?"moveStart":"moveEnd"]("character",j),k}var f=a.document,g=f.body;b.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],27:[function(a,b,c){var d=a("./getSelection"),e=a("./setSelection");b.exports={get:d,set:e}},{"./getSelection":21,"./setSelection":28}],28:[function(a,b,c){(function(c){function d(a){function b(){var b=e(),c=g.createRange();a.startContainer&&(a.endContainer?c.setEnd(a.endContainer,a.endOffset):c.setEnd(a.startContainer,a.startOffset),c.setStart(a.startContainer,a.startOffset),b.removeAllRanges(),b.addRange(c))}function c(){f(a).select()}g.createRange?b():c()}var e=a("./getSelection"),f=a("./rangeToTextRange"),g=c.document;b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./getSelection":21,"./rangeToTextRange":26}],29:[function(a,b,c){function d(a){return{start:a.selectionStart,end:a.selectionEnd}}function e(a){function b(b,d){return c!==a&&(c?c.focus():a.blur()),{start:b,end:d}}var c=document.activeElement;c!==a&&a.focus();var d=document.selection.createRange(),e=d.getBookmark(),h=a.value,i=f(h),j=d.parentElement();if(null===j||!g(j))return b(0,0);d.text=i+d.text+i;var k=a.value;return a.value=h,d.moveToBookmark(e),d.select(),b(k.indexOf(i),k.lastIndexOf(i)-i.length)}function f(a){var b;do b="@@marker."+Math.random()*new Date;while(a.indexOf(b)!==-1);return b}function g(a){return"INPUT"===a.tagName&&"text"===a.type||"TEXTAREA"===a.tagName}function h(a,b){a.selectionStart=j(a,b.start),a.selectionEnd=j(a,b.end)}function i(a,b){var c=a.createTextRange();"end"===b.start&&"end"===b.end?(c.collapse(!1),c.select()):(c.collapse(!0),c.moveEnd("character",j(a,b.end)),c.moveStart("character",j(a,b.start)),c.select())}function j(a,b){return"end"===b?a.value.length:b||0}function k(a,b){return 2===arguments.length&&m(a,b),l(a)}var l=d,m=h;document.selection&&document.selection.createRange&&(l=e,m=i),b.exports=k},{}],30:[function(a,b,c){var d,e="function"==typeof setImmediate;d=e?function(a){setImmediate(a)}:function(a){setTimeout(a,0)},b.exports=d},{}]},{},[1])(1)})}}}),System.register("location-editor.js",["./location","./utility","./data","aurelia-framework","aurelia-router","aurelia-event-aggregator","./messages","aurelia-templating-resources","aurelia-dialog","vendor/horsey-modified"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t;return{setters:[function(a){d=a.Location,e=a.NextLocation},function(a){f=a.areEqual,q=a.openDefaultDeleteConfirmationDialog},function(a){g=a.Data},function(a){h=a.inject,k=a.ObserverLocator,p=a.TaskQueue},function(a){i=a.activationStrategy,l=a.Router},function(a){j=a.EventAggregator},function(a){m=a.LocationViewed},function(a){n=a.BindingSignaler},function(a){o=a.DialogService},function(a){}],execute:function(){a("LocationEditor",(r=h(g,j,l,n,o,k,p),t=r(s=function(){function a(b,d,e,f,g,h,i){c(this,a),this.data=b,this.eventAggregator=d,this.router=e,this.bindingSignaler=f,this.dialogService=g,this.observerLocator=h,this.taskQueue=i,this.nextLocationTargets=[],this.qrCodeMaxLength=1e3,this.qrCodeMaxLengthWarning=800,this.nextLocationTargetAutoCompleteList=[],this.nextLocationTargetAutoCompleteListContainer=[{list:this.nextLocationTargetAutoCompleteList}]}return a.prototype.determineActivationStrategy=function(){return i.replace},a.prototype.activate=function(a,b){this.routeConfig=b,this.gameInfo=this.data.getGameInfo(),this.setLocation(this.data.getLocation(a.id)),this.gameNameChangeSubscription=this.observerLocator.getObserver(this.gameInfo,"name").subscribe(this.updateQRCodeLength.bind(this))},a.prototype.attached=function(){var a=this;this.eventAggregator.publish(new m(this.location)),this.taskQueue.queueMicroTask(function(){a.initializeNextLocationAutoCompleteAll()})},a.prototype.deactivate=function(){this.gameNameChangeSubscription&&(this.gameNameChangeSubscription.dispose(),this.gameNameChangeSubscription=null)},a.prototype.setLocation=function(a){this.location=a,this.routeConfig.navModel.setTitle(this.location.locationName),this.eventAggregator.publish(new m(this.location)),this.nextLocationTargets.length=0;for(var b=0;b<this.location.nextLocations.length;b++)this.updateNextLocationTarget(b);var c=this.data.getLocations();this.nextLocationTargetAutoCompleteList.length=0;for(var d=0;d<c.length;d++){var e=c[d];e.id!==a.id&&e.locationName&&this.nextLocationTargetAutoCompleteList.push(e.locationName),this.nextLocationTargetAutoCompleteList.sort()}this.updateQRCodeLength()},a.prototype.addNextLocation=function(){var a=this;this.location.nextLocations.push(new e),this.updateQRCodeLength(),this.taskQueue.queueMicroTask(function(){a.initializeNextLocationAutoComplete(a.location.nextLocations.length-1)})},a.prototype.moveNextLocationUp=function(a){a>0&&this.switchNextLocations(a,a-1)},a.prototype.moveNextLocationDown=function(a){a+1<this.location.nextLocations.length&&this.switchNextLocations(a,a+1)},a.prototype.switchNextLocations=function(a,b){var c=this,d=this.location.nextLocations,e=d[a],f=d[b];d.splice(a,1,f),d.splice(b,1,e),this.taskQueue.queueMicroTask(function(){c.taskQueue.queueMicroTask(function(){c.initializeNextLocationAutoComplete(a),c.initializeNextLocationAutoComplete(b)})})},a.prototype.removeNextLocation=function(a){var b=this,c=this.location.nextLocations[a];c.decision||c.locationName?q(this.dialogService,"Orts-Übergang wirklich löschen?",'"Wenn du '+c.decision+", dann gehe zu "+c.locationName+'."',function(){b.removeNextLocationNow(a)}):this.removeNextLocationNow(a)},a.prototype.removeNextLocationNow=function(a){this.location.nextLocations.splice(a,1),this.updateQRCodeLength()},a.prototype.updateNextLocationTarget=function(a){var b=this.location.nextLocations[a],c=this.data.getTargetLocationFromNextLocation(this.location,b);this.nextLocationTargets[a]=c,this.bindingSignaler.signal("update-next-location-target"),this.bindingSignaler.signal("update-list-location-validity"),this.updateQRCodeLength()},a.prototype.getNextLocationTarget=function(a){return this.nextLocationTargets[a]},a.prototype.nextLocationTargetClicked=function(a){var b=this.nextLocationTargets[a];b||(b=this.data.createLocation(),b.locationName=this.location.nextLocations[a].locationName),this.router.navigateToRoute("location-editor",{id:b.id})},a.prototype.initializeNextLocationAutoCompleteAll=function(){for(var a=0;a<this.location.nextLocations.length;a++)this.initializeNextLocationAutoComplete(a)},a.prototype.initializeNextLocationAutoComplete=function(a){var b=document.querySelector("#next-location-location-name-"+a);horsey(b,{highlighter:!1,highlightCompleteWords:!1,source:this.nextLocationTargetAutoCompleteListContainer,filter:this.nextLocationAutoCompleteFilter,set:this.nextLocationAutoCompleteSet.bind(this,a)})},a.prototype.nextLocationAutoCompleteFilter=function(a,b){return b.toLowerCase().includes(a.toLowerCase())},a.prototype.nextLocationAutoCompleteSet=function(a,b){this.location.nextLocations[a].locationName=b,this.updateNextLocationTarget(a)},a.prototype.deleteLocation=function(){var a=this;q(this.dialogService,'Ort "'+this.location.locationName+'" wirklich löschen?',"",function(){var b=a.data.getLocations(),c=b.indexOf(a.location);c!==-1&&b.splice(c,1),a.eventAggregator.publish(new m(null)),a.router.navigateToRoute("overview")})},a.prototype.locationCodeChanged=function(){this.bindingSignaler.signal("update-list")},a.prototype.locationNameChanged=function(){this.bindingSignaler.signal("update-list-location-validity")},a.prototype.updateQRCodeLength=function(){this.bindingSignaler.signal("update-qr-code-length"),this.qrCodeLength=this.location.toQRCodeText(this.gameInfo).length,this.qrCodeLength<=this.qrCodeMaxLengthWarning?(this.qrCodeClass="well-success",this.qrCodeAnalysis="gute Erkennung"):this.qrCodeLength<=this.qrCodeMaxLength?(this.qrCodeClass="well-warning",this.qrCodeAnalysis="möglicherweise problematische Erkennung"):(this.qrCodeClass="well-danger",this.qrCodeAnalysis=this.qrCodeLength-this.qrCodeMaxLength+" Zeichen zu viel - sehr schlechte Erkennung")},a}())||s)),a("LocationEditor",t)}}}),function(){var a=System.amdDefine;a("location-list.html!github:systemjs/plugin-text@0.0.8.js",[],function(){return'<template><require from="value-converters"></require><div class="location-list"><ul class="list-group"><li repeat.for="location of locations | sort: \'locationCodeUpperCase\':\'ascending\' & signal:\'update-list\'" class="list-group-item ${location.id === $parent.selectedId ? \'active\' : \'\'} ${(isLocationComplete(location) ? \'location-valid\' : \'location-not-valid\') & signal:\'update-list-location-validity\'}"><a click.trigger="$parent.locationClicked(location)"><div><span class="list-text list-group-item-heading"><span class="location-code">${(location.locationCode.length > 0) ? location.locationCode : "?"}</span> <span>${(location.sceneName.length > 0) ? location.sceneName : "(Unbenannt)"}</span> </span><!--\r\n                        <span style="width: 20px; float: right;">\r\n                            <button click.trigger="$parent.removeLocation(location)"><i class="fa fa-trash-o" aria-hidden="true"></i></button>\r\n                        </span>\r\n                        --></div></a></li></ul></div></template>'})}(),System.register("location-list.js",["./location","./data","aurelia-framework","aurelia-event-aggregator","./messages","aurelia-router"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h,i,j,k,l;return{setters:[function(a){d=a.Location},function(a){e=a.Data},function(a){f=a.inject},function(a){g=a.EventAggregator},function(a){h=a.LocationViewed},function(a){i=a.Router}],execute:function(){a("LocationList",(j=f(e,g,i),l=j(k=function(){function a(b,d,e){c(this,a),this.data=b,this.router=e,this.eventAggregator=d,this.selectedId=-1,this.locations=[]}return a.prototype.created=function(){this.locations=this.data.getLocations()},a.prototype.attached=function(){var a=this;this.locationViewedSubscription=this.eventAggregator.subscribe(h,function(b){return a.selectLocation(b.location)})},a.prototype.detached=function(){this.locationViewedSubscription.dispose(),this.locationViewedSubscription=null},a.prototype.addLocation=function(){var a=this.data.createLocation();console.log("test",this.data.getLocationCount()),1===this.data.getLocationCount()&&(a.locationName=this.data.getGameInfo().startingLocation),this.selectLocation(a),this.router.navigateToRoute("location-editor",{id:a.id})},a.prototype.selectLocation=function(a){return this.selectedId=a?a.id:-1,!0},a.prototype.locationClicked=function(a){return this.ignoreOneClick?void(this.ignoreOneClick=!1):void(this.selectedId==a.id?(this.router.navigateToRoute("overview"),this.selectLocation(null)):(this.router.navigateToRoute("location-editor",{id:a.id}),this.selectLocation(a)))},a.prototype.isLocationComplete=function(a){for(var b=a.nextLocations,c=Array.isArray(b),d=0,b=c?b:b[Symbol.iterator]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{if(d=b.next(),d.done)break;e=d.value}var f=e;if(!f.locationName)return!1;var g=this.data.getTargetLocationFromNextLocation(a,f);if(!g)return!1}return!0},a}())||k)),a("LocationList",l)}}}),function(){var a=System.amdDefine;a("location-no-selection.html!github:systemjs/plugin-text@0.0.8.js",[],function(){return'<template><div class="no-selection text-center"><h2>Kein Ort ausgewählt.</h2></div></template>'})}(),System.register("location-no-selection.js",[],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d;return{setters:[],execute:function(){a("LocationNoSelection",d=function a(){c(this,a)}),a("LocationNoSelection",d)}}}),function(){var a=System.amdDefine;a("location-qr-code-display.html!github:systemjs/plugin-text@0.0.8.js",[],function(){return'<template><require from="qr-code-display"></require><require from="print-button"></require><require from="value-converters"></require><require from="print-content"></require><div class="panel panel-primary"><div class="panel-heading"><h3 class="panel-title">Werkzeuge</h3></div><div class="panel-body"><div class="toolbar toolbar-two-buttons"><a route-href="route: location-editor; params.bind: {id:location.id}" class="toolbar-button"><button><i class="fa fa-pencil-square-o" aria-hidden="true"></i> Zurück zum Editor</button></a><print-button location.bind="location" label="QR-Code drucken" class="toolbar-button"></print-button></div></div></div><h2>Ungefähre Druckvorschau</h2><div class="well-preview"><print-content location.bind="location"></print-content><div class="clearfix"></div></div><h2>Roher QR-Code-Text</h2><div class="well"><div innerhtml.bind="qrCodeText | escapeHtml | newlinesToBr"></div></div></template>'})}(),System.register("location-qr-code-display.js",["aurelia-framework","aurelia-router","./data","aurelia-event-aggregator","./messages","./qr-code-service","./utility"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h,i,j,k,l,m;return{setters:[function(a){d=a.inject},function(a){e=a.activationStrategy},function(a){f=a.Data},function(a){g=a.EventAggregator},function(a){h=a.LocationViewed},function(a){i=a.QrCodeService},function(a){j=a.formatTwoDigits}],execute:function(){a("LocationQrCodeDisplay",(k=d(f,g,i),m=k(l=function(){function a(b,d,e){c(this,a),this.qrCodeText="",this.data=b,this.eventAggregator=d,this.qrCodeService=e}return a.prototype.determineActivationStrategy=function(){return e.replace},a.prototype.activate=function(a,b){this.routeConfig=b,this.location=this.data.getLocation(a.id),this.qrCodeText=this.location.toQRCodeText(this.data.getGameInfo()),this.eventAggregator.publish(new h(this.location))},a}())||l)),a("LocationQrCodeDisplay",m)}}}),System.register("main.js",["bootstrap"],function(a,b){"use strict";function c(a){a.use.standardConfiguration().developmentLogging().plugin("aurelia-dialog"),a.start().then(function(){return a.setRoot()})}return a("configure",c),{setters:[function(a){}],execute:function(){}}}),function(){var a=System.amdDefine;a("nav-bar.html!github:systemjs/plugin-text@0.0.8.js",[],function(){return'<template bindable="router"><require from="./build-version-display"></require><require from="./save-state-display"></require><nav class="navbar navbar-default navbar-fixed-top" role="navigation"><div class="navbar-header"><button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#skeleton-navigation-navbar-collapse"><span class="sr-only">Toggle Navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button> <a class="navbar-brand" href="#"><span>${router.title}</span></a><div class="navbar-show-toggled"><save-state-display></save-state-display></div></div><div class="collapse navbar-collapse" id="skeleton-navigation-navbar-collapse"><ul class="nav navbar-nav"><li repeat.for="row of router.navigation" class="${row.isActive ? \'active\' : \'\'}"><a data-toggle="collapse" data-target="#skeleton-navigation-navbar-collapse.in" href.bind="row.href"><i class="fa ${row.settings}"></i></a></li></ul><build-version-display></build-version-display><div class="navbar-hide-toggled"><save-state-display></save-state-display></div><!--\r\n            <ul class="nav navbar-nav navbar-right">\r\n                <li class="loader" if.bind="router.isNavigating">\r\n                    <i class="fa fa-spinner fa-spin fa-2x"></i>\r\n                </li>\r\n            </ul>\r\n            --></div></nav></template>'})}(),function(){var a=System.amdDefine;a("overview.html!github:systemjs/plugin-text@0.0.8.js",[],function(){return'<template><require from="./location-list"></require><require from="./game-info-editor"></require><require from="./add-location-button"></require><div class="row"><div class="col-md-3"><game-info-editor></game-info-editor><add-location-button></add-location-button><location-list></location-list></div><router-view class="col-md-9"></router-view></div></template>'})}(),System.register("overview.js",[],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d;return{setters:[],execute:function(){a("ChildRouter",d=function(){function a(){c(this,a)}return a.prototype.configureRouter=function(a,b){a.map([{route:"",name:"location-no-selection",moduleId:"location-no-selection"},{route:"edit",name:"location-editor",moduleId:"location-editor"},{route:"qr",name:"location-qr-code-display",moduleId:"location-qr-code-display"}]),this.router=b},a}()),a("ChildRouter",d)}}}),function(){var a=System.amdDefine;a("print-area.html!github:systemjs/plugin-text@0.0.8.js",[],function(){return'<template><require from="print-content"></require><print-content repeat.for="location of locations" location.bind="location"></print-content></template>'})}(),System.register("print-area.js",["./location","aurelia-framework","aurelia-event-aggregator","./messages"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h,i,j;return{setters:[function(a){d=a.Location},function(a){e=a.inject},function(a){f=a.EventAggregator},function(a){g=a.PrintLocations}],execute:function(){a("PrintArea",(h=e(f),j=h(i=function(){function a(b){c(this,a),this.eventAggregator=b}return a.prototype.attached=function(){var a=this;this.printLocationsSubscription=this.eventAggregator.subscribe(g,function(b){return a.printLocations(b.locations)})},a.prototype.detached=function(){this.printLocationsSubscription.dispose(),this.printLocationsSubscription=null},a.prototype.printLocations=function(a){var b=this;this.locations=[],setTimeout(function(){b.locations=a,setTimeout(function(){window.print()},0)},0)},a}())||i)),a("PrintArea",j)}}}),function(){var a=System.amdDefine;a("print-button.html!github:systemjs/plugin-text@0.0.8.js",[],function(){
return'<template><button click.trigger="print()"><i class="fa fa-print" aria-hidden="true"></i> ${label}</button></template>'})}(),System.register("print-button.js",["aurelia-framework","aurelia-event-aggregator","./messages"],function(a,b){"use strict";function c(a,b,c,d){c&&Object.defineProperty(a,b,{enumerable:c.enumerable,configurable:c.configurable,writable:c.writable,value:c.initializer?c.initializer.call(d):void 0})}function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}var f,g,h,i,j,k,l,m,n,o;return{setters:[function(a){f=a.bindable,g=a.inject},function(a){h=a.EventAggregator},function(a){i=a.PrintLocations}],execute:function(){a("PrintButton",(j=g(h),o=j((l=function(){function a(b){d(this,a),c(this,"label",m,this),c(this,"location",n,this),this.eventAggregator=b}return a.prototype.print=function(){this.eventAggregator.publish(new i([this.location]))},a}(),m=e(l.prototype,"label",[f],{enumerable:!0,initializer:function(){return"Drucken"}}),n=e(l.prototype,"location",[f],{enumerable:!0,initializer:function(){return null}}),k=l))||k)),a("PrintButton",o)}}}),function(){var a=System.amdDefine;a("print-content.html!github:systemjs/plugin-text@0.0.8.js",[],function(){return'<template><require from="qr-code-display"></require><div class="print-content"><div class="print-title"><span>${location.sceneName}</span></div><qr-code-display text.bind="qrCodeText"></qr-code-display><div class="print-game-info"><span>${gameInfo.name}</span><br>Starte hier: <span>${gameInfo.startingLocation}</span></div><div class="print-manual">Scan den Code, am besten mit<br>"Ungehörsam-Reader" (Android/iOS)</div><div class="print-internal-info">${location.locationCode} / ${location.locationName}</div></div></template>'})}(),System.register("print-content.js",["aurelia-framework","./messages","./data"],function(a,b){"use strict";function c(a,b,c,d){c&&Object.defineProperty(a,b,{enumerable:c.enumerable,configurable:c.configurable,writable:c.writable,value:c.initializer?c.initializer.call(d):void 0})}function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}var f,g,h,i,j,k,l,m,n;return{setters:[function(a){f=a.bindable,g=a.inject},function(a){h=a.PrintLocations},function(a){i=a.Data}],execute:function(){a("PrintContent",(j=g(i),n=j((l=function(){function a(b){d(this,a),c(this,"location",m,this),this.data=b}return a.prototype.created=function(){this.gameInfo=this.data.getGameInfo()},a.prototype.locationChanged=function(){this.location?this.qrCodeText=this.location.toQRCodeText(this.gameInfo):this.qrCodeText=""},a}(),m=e(l.prototype,"location",[f],{enumerable:!0,initializer:function(){return null}}),k=l))||k)),a("PrintContent",n)}}}),function(){var a=System.amdDefine;a("print.html!github:systemjs/plugin-text@0.0.8.js",[],function(){return'<template><require from="value-converters"></require><require from="print-content"></require><h1>Auswahl</h1><div class="print-toolbar"><button click.trigger="selectionSetAll(true)"><i class="fa fa-check" aria-hidden="true"></i> Alles</button> <button click.trigger="selectionSetAll(false)"><i class="fa fa-ban" aria-hidden="true"></i> Nichts</button> <button click.trigger="selectionInvert()"><i class="fa fa-exchange" aria-hidden="true"></i> Invertieren</button></div><form class="print-list"><div class="checkbox" repeat.for="location of locations | sort: \'locationCodeUpperCase\':\'ascending\'"><label><input type="checkbox" checked.bind="location.printChecked"> <span class="location-code">${(location.locationCode.length > 0) ? location.locationCode : "?"}</span> <span>${(location.sceneName.length > 0) ? location.sceneName : "(Unbenannt)"}</span></label></div></form><button click.trigger="print()"><i class="fa fa-print" aria-hidden="true"></i> Drucken</button><h1>Ungefähre Druckvorschau</h1><div class="well-preview"><print-content repeat.for="location of locations | sort: \'locationCodeUpperCase\':\'ascending\'" if.bind="location.printChecked" location.bind="location"></print-content><div class="clearfix"></div></div></template>'})}(),System.register("print.js",["./data","aurelia-framework","aurelia-event-aggregator","./messages"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h,i,j;return{setters:[function(a){d=a.Data},function(a){e=a.inject},function(a){f=a.EventAggregator},function(a){g=a.PrintLocations}],execute:function(){a("Print",(h=e(d,f),j=h(i=function(){function a(b,d){c(this,a),this.data=b,this.eventAggregator=d,this.locations=[]}return a.prototype.created=function(){this.locations=this.data.getLocations()},a.prototype.print=function(){var a=this.locations.filter(function(a){return a.printChecked});a=a.sort(function(a,b){return a.locationCodeUpperCase<b.locationCodeUpperCase?-1:1}),this.eventAggregator.publish(new g(a))},a.prototype.selectionSetAll=function(a){for(var b=this.locations,c=Array.isArray(b),d=0,b=c?b:b[Symbol.iterator]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{if(d=b.next(),d.done)break;e=d.value}var f=e;f.printChecked=a}},a.prototype.selectionInvert=function(){for(var a=this.locations,b=Array.isArray(a),c=0,a=b?a:a[Symbol.iterator]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{if(c=a.next(),c.done)break;d=c.value}var e=d;e.printChecked=!e.printChecked}},a}())||i)),a("Print",j)}}}),function(){var a=System.amdDefine;a("qr-code-display.html!github:systemjs/plugin-text@0.0.8.js",[],function(){return'<template><div ref="display"></div></template>'})}(),System.register("qrcode.js",[],function(a,b){"use strict";var c,d;return{setters:[],execute:function(){c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},a("qrcode",d=function(){function a(b,c){if("undefined"==typeof b.length)throw b.length+"/"+c;var d=function(){for(var a=0;a<b.length&&0==b[a];)a+=1;for(var d=new Array(b.length-a+c),e=0;e<b.length-a;e+=1)d[e]=b[e+a];return d}(),e={};return e.getAt=function(a){return d[a]},e.getLength=function(){return d.length},e.multiply=function(b){for(var c=new Array(e.getLength()+b.getLength()-1),d=0;d<e.getLength();d+=1)for(var f=0;f<b.getLength();f+=1)c[d+f]^=g.gexp(g.glog(e.getAt(d))+g.glog(b.getAt(f)));return a(c,0)},e.mod=function(b){if(e.getLength()-b.getLength()<0)return e;for(var c=g.glog(e.getAt(0))-g.glog(b.getAt(0)),d=new Array(e.getLength()),f=0;f<e.getLength();f+=1)d[f]=e.getAt(f);for(var f=0;f<b.getLength();f+=1)d[f]^=g.gexp(g.glog(b.getAt(f))+c);return a(d,0).mod(b)},e}var b=function(b,c){var e=236,g=17,n=b,o=d[c],p=null,q=0,s=null,t=[],u={},v=function(a,b){q=4*n+17,p=function(a){for(var b=new Array(a),c=0;c<a;c+=1){b[c]=new Array(a);for(var d=0;d<a;d+=1)b[c][d]=null}return b}(q),w(0,0),w(q-7,0),w(0,q-7),z(),y(),B(a,b),n>=7&&A(a),null==s&&(s=E(n,o,t)),C(s,b)},w=function(a,b){for(var c=-1;c<=7;c+=1)if(!(a+c<=-1||q<=a+c))for(var d=-1;d<=7;d+=1)b+d<=-1||q<=b+d||(0<=c&&c<=6&&(0==d||6==d)||0<=d&&d<=6&&(0==c||6==c)||2<=c&&c<=4&&2<=d&&d<=4?p[a+c][b+d]=!0:p[a+c][b+d]=!1)},x=function(){for(var a=0,b=0,c=0;c<8;c+=1){v(!0,c);var d=f.getLostPoint(u);(0==c||a>d)&&(a=d,b=c)}return b},y=function(){for(var a=8;a<q-8;a+=1)null==p[a][6]&&(p[a][6]=a%2==0);for(var b=8;b<q-8;b+=1)null==p[6][b]&&(p[6][b]=b%2==0)},z=function(){for(var a=f.getPatternPosition(n),b=0;b<a.length;b+=1)for(var c=0;c<a.length;c+=1){var d=a[b],e=a[c];if(null==p[d][e])for(var g=-2;g<=2;g+=1)for(var h=-2;h<=2;h+=1)g==-2||2==g||h==-2||2==h||0==g&&0==h?p[d+g][e+h]=!0:p[d+g][e+h]=!1}},A=function(a){for(var b=f.getBCHTypeNumber(n),c=0;c<18;c+=1){var d=!a&&1==(b>>c&1);p[Math.floor(c/3)][c%3+q-8-3]=d}for(var c=0;c<18;c+=1){var d=!a&&1==(b>>c&1);p[c%3+q-8-3][Math.floor(c/3)]=d}},B=function(a,b){for(var c=o<<3|b,d=f.getBCHTypeInfo(c),e=0;e<15;e+=1){var g=!a&&1==(d>>e&1);e<6?p[e][8]=g:e<8?p[e+1][8]=g:p[q-15+e][8]=g}for(var e=0;e<15;e+=1){var g=!a&&1==(d>>e&1);e<8?p[8][q-e-1]=g:e<9?p[8][15-e-1+1]=g:p[8][15-e-1]=g}p[q-8][8]=!a},C=function(a,b){for(var c=-1,d=q-1,e=7,g=0,h=f.getMaskFunction(b),i=q-1;i>0;i-=2)for(6==i&&(i-=1);;){for(var j=0;j<2;j+=1)if(null==p[d][i-j]){var k=!1;g<a.length&&(k=1==(a[g]>>>e&1));var l=h(d,i-j);l&&(k=!k),p[d][i-j]=k,e-=1,e==-1&&(g+=1,e=7)}if(d+=c,d<0||q<=d){d-=c,c=-c;break}}},D=function(b,c){for(var d=0,e=0,g=0,h=new Array(c.length),i=new Array(c.length),j=0;j<c.length;j+=1){var k=c[j].dataCount,l=c[j].totalCount-k;e=Math.max(e,k),g=Math.max(g,l),h[j]=new Array(k);for(var m=0;m<h[j].length;m+=1)h[j][m]=255&b.getBuffer()[m+d];d+=k;var n=f.getErrorCorrectPolynomial(l),o=a(h[j],n.getLength()-1),p=o.mod(n);i[j]=new Array(n.getLength()-1);for(var m=0;m<i[j].length;m+=1){var q=m+p.getLength()-i[j].length;i[j][m]=q>=0?p.getAt(q):0}}for(var r=0,m=0;m<c.length;m+=1)r+=c[m].totalCount;for(var s=new Array(r),t=0,m=0;m<e;m+=1)for(var j=0;j<c.length;j+=1)m<h[j].length&&(s[t]=h[j][m],t+=1);for(var m=0;m<g;m+=1)for(var j=0;j<c.length;j+=1)m<i[j].length&&(s[t]=i[j][m],t+=1);return s},E=function(a,b,c){for(var d=h.getRSBlocks(a,b),j=i(),k=0;k<c.length;k+=1){var l=c[k];j.put(l.getMode(),4),j.put(l.getLength(),f.getLengthInBits(l.getMode(),a)),l.write(j)}for(var m=0,k=0;k<d.length;k+=1)m+=d[k].dataCount;if(j.getLengthInBits()>8*m)throw"code length overflow. ("+j.getLengthInBits()+">"+8*m+")";for(j.getLengthInBits()+4<=8*m&&j.put(0,4);j.getLengthInBits()%8!=0;)j.putBit(!1);for(;;){if(j.getLengthInBits()>=8*m)break;if(j.put(e,8),j.getLengthInBits()>=8*m)break;j.put(g,8)}return D(j,d)};return u.addData=function(a,b){b=b||"Byte";var c=null;switch(b){case"Numeric":c=j(a);break;case"Alphanumeric":c=k(a);break;case"Byte":c=l(a);break;case"Kanji":c=m(a);break;default:throw"mode:"+b}t.push(c),s=null},u.isDark=function(a,b){if(a<0||q<=a||b<0||q<=b)throw a+","+b;return p[a][b]},u.getModuleCount=function(){return q},u.make=function(){if(n<1){for(var a=1;a<40;a++){for(var b=h.getRSBlocks(a,o),c=i(),d=0;d<t.length;d++){var e=t[d];c.put(e.getMode(),4),c.put(e.getLength(),f.getLengthInBits(e.getMode(),a)),e.write(c)}for(var g=0,d=0;d<b.length;d++)g+=b[d].dataCount;if(c.getLengthInBits()<=8*g)break}n=a}v(!1,x())},u.createTableTag=function(a,b){a=a||2,b="undefined"==typeof b?4*a:b;var c="";c+='<table style="',c+=" border-width: 0px; border-style: none;",c+=" border-collapse: collapse;",c+=" padding: 0px; margin: "+b+"px;",c+='">',c+="<tbody>";for(var d=0;d<u.getModuleCount();d+=1){c+="<tr>";for(var e=0;e<u.getModuleCount();e+=1)c+='<td style="',c+=" border-width: 0px; border-style: none;",c+=" border-collapse: collapse;",c+=" padding: 0px; margin: 0px;",c+=" width: "+a+"px;",c+=" height: "+a+"px;",c+=" background-color: ",c+=u.isDark(d,e)?"#000000":"#ffffff",c+=";",c+='"/>';c+="</tr>"}return c+="</tbody>",c+="</table>"},u.createSvgTag=function(a,b){a=a||2,b="undefined"==typeof b?4*a:b;var c,d,e,f,g,h=u.getModuleCount()*a+2*b,i="";for(g="l"+a+",0 0,"+a+" -"+a+",0 0,-"+a+"z ",i+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',i+=' width="'+h+'px"',i+=' height="'+h+'px"',i+=' viewBox="0 0 '+h+" "+h+'" ',i+=' preserveAspectRatio="xMinYMin meet">',i+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',i+='<path d="',e=0;e<u.getModuleCount();e+=1)for(f=e*a+b,c=0;c<u.getModuleCount();c+=1)u.isDark(e,c)&&(d=c*a+b,i+="M"+d+","+f+g);return i+='" stroke="transparent" fill="black"/>',i+="</svg>"},u.createImgTag=function(a,b){a=a||2,b="undefined"==typeof b?4*a:b;var c=u.getModuleCount()*a+2*b,d=b,e=c-b;return r(c,c,function(b,c){if(d<=b&&b<e&&d<=c&&c<e){var f=Math.floor((b-d)/a),g=Math.floor((c-d)/a);return u.isDark(g,f)?0:1}return 1})},u};b.stringToBytesFuncs={default:function(a){for(var b=[],c=0;c<a.length;c+=1){var d=a.charCodeAt(c);b.push(255&d)}return b}},b.stringToBytes=b.stringToBytesFuncs.default,b.createStringToBytes=function(a,b){var c=function(){for(var c=p(a),d=function(){var a=c.read();if(a==-1)throw"eof";return a},e=0,f={};;){var g=c.read();if(g==-1)break;var h=d(),i=d(),j=d(),k=String.fromCharCode(g<<8|h),l=i<<8|j;f[k]=l,e+=1}if(e!=b)throw e+" != "+b;return f}(),d="?".charCodeAt(0);return function(a){for(var b=[],e=0;e<a.length;e+=1){var f=a.charCodeAt(e);if(f<128)b.push(f);else{var g=c[a.charAt(e)];"number"==typeof g?(255&g)==g?b.push(g):(b.push(g>>>8),b.push(255&g)):b.push(d)}}return b}};var c={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},d={L:1,M:0,Q:3,H:2},e={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},f=function(){var b=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],d=1335,f=7973,h=21522,i={},j=function(a){for(var b=0;0!=a;)b+=1,a>>>=1;return b};return i.getBCHTypeInfo=function(a){for(var b=a<<10;j(b)-j(d)>=0;)b^=d<<j(b)-j(d);return(a<<10|b)^h},i.getBCHTypeNumber=function(a){for(var b=a<<12;j(b)-j(f)>=0;)b^=f<<j(b)-j(f);return a<<12|b},i.getPatternPosition=function(a){return b[a-1]},i.getMaskFunction=function(a){switch(a){case e.PATTERN000:return function(a,b){return(a+b)%2==0};case e.PATTERN001:return function(a,b){return a%2==0};case e.PATTERN010:return function(a,b){return b%3==0};case e.PATTERN011:return function(a,b){return(a+b)%3==0};case e.PATTERN100:return function(a,b){return(Math.floor(a/2)+Math.floor(b/3))%2==0};case e.PATTERN101:return function(a,b){return a*b%2+a*b%3==0};case e.PATTERN110:return function(a,b){return(a*b%2+a*b%3)%2==0};case e.PATTERN111:return function(a,b){return(a*b%3+(a+b)%2)%2==0};default:throw"bad maskPattern:"+a}},i.getErrorCorrectPolynomial=function(b){for(var c=a([1],0),d=0;d<b;d+=1)c=c.multiply(a([1,g.gexp(d)],0));return c},i.getLengthInBits=function(a,b){if(1<=b&&b<10)switch(a){case c.MODE_NUMBER:return 10;case c.MODE_ALPHA_NUM:return 9;case c.MODE_8BIT_BYTE:return 8;case c.MODE_KANJI:return 8;default:throw"mode:"+a}else if(b<27)switch(a){case c.MODE_NUMBER:return 12;case c.MODE_ALPHA_NUM:return 11;case c.MODE_8BIT_BYTE:return 16;case c.MODE_KANJI:return 10;default:throw"mode:"+a}else{if(!(b<41))throw"type:"+b;switch(a){case c.MODE_NUMBER:return 14;case c.MODE_ALPHA_NUM:return 13;case c.MODE_8BIT_BYTE:return 16;case c.MODE_KANJI:return 12;default:throw"mode:"+a}}},i.getLostPoint=function(a){for(var b=a.getModuleCount(),c=0,d=0;d<b;d+=1)for(var e=0;e<b;e+=1){for(var f=0,g=a.isDark(d,e),h=-1;h<=1;h+=1)if(!(d+h<0||b<=d+h))for(var i=-1;i<=1;i+=1)e+i<0||b<=e+i||0==h&&0==i||g==a.isDark(d+h,e+i)&&(f+=1);f>5&&(c+=3+f-5)}for(var d=0;d<b-1;d+=1)for(var e=0;e<b-1;e+=1){var j=0;a.isDark(d,e)&&(j+=1),a.isDark(d+1,e)&&(j+=1),a.isDark(d,e+1)&&(j+=1),a.isDark(d+1,e+1)&&(j+=1),0!=j&&4!=j||(c+=3)}for(var d=0;d<b;d+=1)for(var e=0;e<b-6;e+=1)a.isDark(d,e)&&!a.isDark(d,e+1)&&a.isDark(d,e+2)&&a.isDark(d,e+3)&&a.isDark(d,e+4)&&!a.isDark(d,e+5)&&a.isDark(d,e+6)&&(c+=40);for(var e=0;e<b;e+=1)for(var d=0;d<b-6;d+=1)a.isDark(d,e)&&!a.isDark(d+1,e)&&a.isDark(d+2,e)&&a.isDark(d+3,e)&&a.isDark(d+4,e)&&!a.isDark(d+5,e)&&a.isDark(d+6,e)&&(c+=40);for(var k=0,e=0;e<b;e+=1)for(var d=0;d<b;d+=1)a.isDark(d,e)&&(k+=1);var l=Math.abs(100*k/b/b-50)/5;return c+=10*l},i}(),g=function(){for(var a=new Array(256),b=new Array(256),c=0;c<8;c+=1)a[c]=1<<c;for(var c=8;c<256;c+=1)a[c]=a[c-4]^a[c-5]^a[c-6]^a[c-8];for(var c=0;c<255;c+=1)b[a[c]]=c;var d={};return d.glog=function(a){if(a<1)throw"glog("+a+")";return b[a]},d.gexp=function(b){for(;b<0;)b+=255;for(;b>=256;)b-=255;return a[b]},d}(),h=function(){var a=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],b=function(a,b){var c={};return c.totalCount=a,c.dataCount=b,c},c={},e=function(b,c){switch(c){case d.L:return a[4*(b-1)+0];case d.M:return a[4*(b-1)+1];case d.Q:return a[4*(b-1)+2];case d.H:return a[4*(b-1)+3];default:return}};return c.getRSBlocks=function(a,c){var d=e(a,c);if("undefined"==typeof d)throw"bad rs block @ typeNumber:"+a+"/errorCorrectionLevel:"+c;for(var f=d.length/3,g=[],h=0;h<f;h+=1)for(var i=d[3*h+0],j=d[3*h+1],k=d[3*h+2],l=0;l<i;l+=1)g.push(b(j,k));return g},c}(),i=function(){var a=[],b=0,c={};return c.getBuffer=function(){return a},c.getAt=function(b){var c=Math.floor(b/8);return 1==(a[c]>>>7-b%8&1)},c.put=function(a,b){for(var d=0;d<b;d+=1)c.putBit(1==(a>>>b-d-1&1))},c.getLengthInBits=function(){return b},c.putBit=function(c){var d=Math.floor(b/8);a.length<=d&&a.push(0),c&&(a[d]|=128>>>b%8),b+=1},c},j=function(a){var b=c.MODE_NUMBER,d=a,e={};e.getMode=function(){return b},e.getLength=function(a){return d.length},e.write=function(a){for(var b=d,c=0;c+2<b.length;)a.put(f(b.substring(c,c+3)),10),c+=3;c<b.length&&(b.length-c==1?a.put(f(b.substring(c,c+1)),4):b.length-c==2&&a.put(f(b.substring(c,c+2)),7))};var f=function(a){for(var b=0,c=0;c<a.length;c+=1)b=10*b+g(a.charAt(c));return b},g=function(a){if("0"<=a&&a<="9")return a.charCodeAt(0)-"0".charCodeAt(0);throw"illegal char :"+a};return e},k=function(a){var b=c.MODE_ALPHA_NUM,d=a,e={};e.getMode=function(){return b},e.getLength=function(a){return d.length},e.write=function(a){for(var b=d,c=0;c+1<b.length;)a.put(45*f(b.charAt(c))+f(b.charAt(c+1)),11),c+=2;c<b.length&&a.put(f(b.charAt(c)),6)};var f=function(a){if("0"<=a&&a<="9")return a.charCodeAt(0)-"0".charCodeAt(0);if("A"<=a&&a<="Z")return a.charCodeAt(0)-"A".charCodeAt(0)+10;switch(a){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+a}};return e},l=function(a){var d=c.MODE_8BIT_BYTE,e=b.stringToBytes(a),f={};return f.getMode=function(){return d},f.getLength=function(a){return e.length},f.write=function(a){for(var b=0;b<e.length;b+=1)a.put(e[b],8)},f},m=function(a){var d=c.MODE_KANJI,e=b.stringToBytesFuncs.SJIS;if(!e)throw"sjis not supported.";!function(a,b){var c=e(a);if(2!=c.length||(c[0]<<8|c[1])!=b)throw"sjis not supported."}("友",38726);var f=e(a),g={};return g.getMode=function(){return d},g.getLength=function(a){return~~(f.length/2)},g.write=function(a){for(var b=f,c=0;c+1<b.length;){var d=(255&b[c])<<8|255&b[c+1];if(33088<=d&&d<=40956)d-=33088;else{if(!(57408<=d&&d<=60351))throw"illegal char at "+(c+1)+"/"+d;d-=49472}d=192*(d>>>8&255)+(255&d),a.put(d,13),c+=2}if(c<b.length)throw"illegal char at "+(c+1)},g},n=function(){var a=[],b={};return b.writeByte=function(b){a.push(255&b)},b.writeShort=function(a){b.writeByte(a),b.writeByte(a>>>8)},b.writeBytes=function(a,c,d){c=c||0,d=d||a.length;for(var e=0;e<d;e+=1)b.writeByte(a[e+c])},b.writeString=function(a){for(var c=0;c<a.length;c+=1)b.writeByte(a.charCodeAt(c))},b.toByteArray=function(){return a},b.toString=function(){var b="";b+="[";for(var c=0;c<a.length;c+=1)c>0&&(b+=","),b+=a[c];return b+="]"},b},o=function(){var a=0,b=0,c=0,d="",e={},f=function(a){d+=String.fromCharCode(g(63&a))},g=function(a){if(a<0);else{if(a<26)return 65+a;if(a<52)return 97+(a-26);if(a<62)return 48+(a-52);if(62==a)return 43;if(63==a)return 47}throw"n:"+a};return e.writeByte=function(d){for(a=a<<8|255&d,b+=8,c+=1;b>=6;)f(a>>>b-6),b-=6},e.flush=function(){if(b>0&&(f(a<<6-b),a=0,b=0),c%3!=0)for(var e=3-c%3,g=0;g<e;g+=1)d+="="},e.toString=function(){return d},e},p=function(a){var b=a,c=0,d=0,e=0,f={};f.read=function(){for(;e<8;){if(c>=b.length){if(0==e)return-1;throw"unexpected end of file./"+e}var a=b.charAt(c);if(c+=1,"="==a)return e=0,-1;a.match(/^\s$/)||(d=d<<6|g(a.charCodeAt(0)),e+=6)}var f=d>>>e-8&255;return e-=8,f};var g=function(a){if(65<=a&&a<=90)return a-65;if(97<=a&&a<=122)return a-97+26;if(48<=a&&a<=57)return a-48+52;if(43==a)return 62;if(47==a)return 63;throw"c:"+a};return f},q=function(a,b){var c=a,d=b,e=new Array(a*b),f={};f.setPixel=function(a,b,d){e[b*c+a]=d},f.write=function(a){a.writeString("GIF87a"),a.writeShort(c),a.writeShort(d),a.writeByte(128),a.writeByte(0),a.writeByte(0),a.writeByte(0),a.writeByte(0),a.writeByte(0),a.writeByte(255),a.writeByte(255),a.writeByte(255),a.writeString(","),a.writeShort(0),a.writeShort(0),a.writeShort(c),a.writeShort(d),a.writeByte(0);var b=2,e=h(b);a.writeByte(b);for(var f=0;e.length-f>255;)a.writeByte(255),a.writeBytes(e,f,255),f+=255;a.writeByte(e.length-f),a.writeBytes(e,f,e.length-f),a.writeByte(0),a.writeString(";")};var g=function(a){var b=a,c=0,d=0,e={};return e.write=function(a,e){if(a>>>e!=0)throw"length over";for(;c+e>=8;)b.writeByte(255&(a<<c|d)),e-=8-c,a>>>=8-c,d=0,c=0;d|=a<<c,c+=e},e.flush=function(){c>0&&b.writeByte(d)},e},h=function(a){for(var b=1<<a,c=(1<<a)+1,d=a+1,f=i(),h=0;h<b;h+=1)f.add(String.fromCharCode(h));f.add(String.fromCharCode(b)),f.add(String.fromCharCode(c));var j=n(),k=g(j);k.write(b,d);var l=0,m=String.fromCharCode(e[l]);for(l+=1;l<e.length;){var o=String.fromCharCode(e[l]);l+=1,f.contains(m+o)?m+=o:(k.write(f.indexOf(m),d),f.size()<4095&&(f.size()==1<<d&&(d+=1),f.add(m+o)),m=o)}return k.write(f.indexOf(m),d),k.write(c,d),k.flush(),j.toByteArray()},i=function(){var a={},b=0,c={};return c.add=function(d){if(c.contains(d))throw"dup key:"+d;a[d]=b,b+=1},c.size=function(){return b},c.indexOf=function(b){return a[b]},c.contains=function(b){return"undefined"!=typeof a[b]},c};return f},r=function(a,b,c,d){for(var e=q(a,b),f=0;f<b;f+=1)for(var g=0;g<a;g+=1)e.setPixel(g,f,c(g,f));var h=n();e.write(h);for(var i=o(),j=h.toByteArray(),k=0;k<j.length;k+=1)i.writeByte(j[k]);i.flush();var l="";return l+="<img",l+=' src="',l+="data:image/gif;base64,",l+=i,l+='"',l+=' width="',l+=a,l+='"',l+=' height="',l+=b,l+='"',d&&(l+=' alt="',l+=d,l+='"'),l+="/>"};return b}()),a("qrcode",d),!function(){d.stringToBytesFuncs["UTF-8"]=function(a){function b(a){for(var b=[],c=0;c<a.length;c++){var d=a.charCodeAt(c);d<128?b.push(d):d<2048?b.push(192|d>>6,128|63&d):d<55296||d>=57344?b.push(224|d>>12,128|d>>6&63,128|63&d):(c++,d=65536+((1023&d)<<10|1023&a.charCodeAt(c)),b.push(240|d>>18,128|d>>12&63,128|d>>6&63,128|63&d))}return b}return b(a)}}(),function(a){"function"==typeof define&&define.amd?define([],a):"object"===("undefined"==typeof exports?"undefined":c(exports))&&(module.exports=a())}(function(){return d})}}}),System.register("qr-code-service.js",["qrcode"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e;return{setters:[function(a){d=a.qrcode}],execute:function(){a("QrCodeService",e=function(){function a(){c(this,a)}return a.prototype.createQRCodeImageTag=function(a){var b=0,c="L",e=d(b,c);return e.addData(a),e.make(),e.createImgTag(null,0)},a.prototype.createQRCodeImageJpeg=function(a){var b=this;return new Promise(function(c){var d=$(b.createQRCodeImageTag(a)),e=d.attr("src"),f=d.attr("width"),g=d.attr("height"),h=document.createElement("canvas"),i=h.getContext("2d");h.width=f,h.height=g;var j=new Image;j.onload=function(){i.drawImage(j,0,0,f,g),e=h.toDataURL("image/jpeg"),c({image:e,imageWidth:f,imageHeight:g})},j.src=e})},a}()),a("QrCodeService",e)}}}),System.register("qr-code-display.js",["aurelia-framework","./qr-code-service"],function(a,b){"use strict";function c(a,b,c,d){c&&Object.defineProperty(a,b,{enumerable:c.enumerable,configurable:c.configurable,writable:c.writable,value:c.initializer?c.initializer.call(d):void 0})}function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b,c,d,e){var f={};return Object.keys(d).forEach(function(a){f[a]=d[a]}),f.enumerable=!!f.enumerable,f.configurable=!!f.configurable,("value"in f||f.initializer)&&(f.writable=!0),f=c.slice().reverse().reduce(function(c,d){return d(a,b,c)||c},f),e&&void 0!==f.initializer&&(f.value=f.initializer?f.initializer.call(e):void 0,f.initializer=void 0),void 0===f.initializer&&(Object.defineProperty(a,b,f),f=null),f}var f,g,h,i,j,k,l,m;return{setters:[function(a){f=a.bindable,g=a.inject},function(a){h=a.QrCodeService}],execute:function(){a("QrCodeDisplay",(i=g(h),m=i((k=function(){function a(b){d(this,a),c(this,"text",l,this),this.qrCodeService=b}return a.prototype.attached=function(){this.refreshQrCode()},a.prototype.textChanged=function(a,b){this.display&&this.refreshQrCode()},a.prototype.refreshQrCode=function(){try{this.text?this.display.innerHTML=this.qrCodeService.createQRCodeImageTag(this.text):this.display.innerHTML=""}catch(a){this.display.innerHTML=a.toString()}},a}(),l=e(k.prototype,"text",[f],{enumerable:!0,initializer:function(){return""}}),j=k))||j)),a("QrCodeDisplay",m)}}}),function(){var a=System.amdDefine;a("save-state-display.html!github:systemjs/plugin-text@0.0.8.js",[],function(){return'<template><div class="save-state-display ${saveStateFailureMessage ? \'bg-danger\' : \'bg-success\'}"><span class="text-success"><i class="fa fa-check-circle"></i> ${saveStateSuccessMessage}</span> <span class="text-danger">${saveStateFailureMessage}</span></div></template>'})}(),System.register("save-state-display.js",["./data","aurelia-framework","aurelia-event-aggregator","./messages","./utility"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h,i,j,k;return{setters:[function(a){d=a.Data},function(a){e=a.inject},function(a){f=a.EventAggregator},function(a){g=a.SaveStateChanged},function(a){h=a.formatTwoDigits}],execute:function(){a("SaveStateDisplay",(i=e(d,f),k=i(j=function(){function a(b,d){c(this,a),this.data=b,this.eventAggregator=d,this.updateSaveState()}return a.prototype.attached=function(){this.saveStateChangedSubscription=this.eventAggregator.subscribe(g,this.updateSaveState.bind(this))},a.prototype.detached=function(){this.saveStateChangedSubscription.dispose(),this.saveStateChangedSubscription=null},a.prototype.updateSaveState=function(){this.data.lastSuccessfulSaveTime?this.saveStateSuccessMessage=h(this.data.lastSuccessfulSaveTime.getHours())+":"+h(this.data.lastSuccessfulSaveTime.getMinutes())+":"+h(this.data.lastSuccessfulSaveTime.getSeconds()):this.saveStateSuccessMessage="Noch nicht gespeichert.",this.data.lastSaveError?this.saveStateFailureMessage="Speicherfehler: "+this.data.lastSaveError:this.saveStateFailureMessage=""},a}())||j)),a("SaveStateDisplay",k)}}}),function(){var a=System.amdDefine;a("tools-import.html!github:systemjs/plugin-text@0.0.8.js",[],function(){return'<template><require from="value-converters"></require><input ref="importFile" type="file" change.delegate="updateFilesSelect($event)"><!--<button click.trigger="saveDataToJSON()"><i class="fa fa-trash-o" aria-hidden="true"></i> In Datei exportieren</button>--><p if.bind="importError" class="alert alert-danger">${importError}</p><div if.bind="importData"><div class="checkbox"><label><input type="checkbox" checked.bind="importGameInfo"> Spiel-Info überschreiben</label></div><div class="checkbox text-danger ${importDeleteCurrentLocations ? \'bg-danger\' : \'\'}"><label><input type="checkbox" checked.bind="importDeleteCurrentLocations"> Aktuelle Orte löschen</label></div><p if.bind="!importDeleteCurrentLocations">Aktuelle Orte werden nicht überschrieben. Neue Orte werden angehangen.</p><div class="tools-import-buttons"><button click.trigger="clear()"><i class="fa fa-times" aria-hidden="true"></i> Abbrechen</button> <button click.trigger="import()"><i class="fa fa-download" aria-hidden="true"></i> Importieren</button></div><h2>Spielinfo</h2><div><div>Spiel-Name: ${importData.gameInfo.name}</div><div>Startort: ${importData.gameInfo.startingLocation}</div></div><h2>Orte</h2><div>${importData.locations.length} Orte</div><div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true"><div repeat.for="location of importData.locations" class="panel panel-default"><div class="panel-heading" role="tab" id="heading${$index}"><h4 class="panel-title"><a class="collapsed" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapse${$index}" aria-expanded="true" aria-controls="collapse${$index}">${(location.locationName.length > 0) ? location.locationName : "(Unbenannt)"}</a></h4></div><div id="collapse${$index}" class="panel-collapse collapse" role="tabpanel" aria-labelledby="heading${$index}"><div class="panel-body"><h3>Beschreibung</h3><!--<div innerHtml.bind="location.description | markdown"></div>--><div>${location.description}</div><h3>Ortswechsel</h3><div><div repeat.for="nextLocation of location.nextLocations">Wenn du <strong>${nextLocation.decision}</strong> dann gehe zu <strong>${nextLocation.locationName}</strong>.</div></div></div></div></div></div></div></template>';
})}(),System.register("tools-import.js",["./location","./data","aurelia-framework","aurelia-router","aurelia-dialog","./dialog-info","./utility"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h,i,j,k,l,m;return{setters:[function(a){d=a.Location},function(a){e=a.Data},function(a){f=a.inject},function(a){g=a.Router},function(a){h=a.DialogService},function(a){i=a.DialogInfo},function(a){j=a.openDefaultDeleteConfirmationDialog}],execute:function(){a("ToolsImport",(k=f(e,g,h),m=k(l=function(){function a(b,d,e){c(this,a),this.data=b,this.router=d,this.dialogService=e}return a.prototype.updateFilesSelect=function(a){var b=this;this.importError=null,this.importData=null;var c=1024,d=a.target.files[0];if(d.size>100*c)return void(this.importError="Dateigröße ist "+Math.floor(d.size/c)+"KB - eindeutig zu groß für eine Export-Datei.");var e=new FileReader;e.onload=function(){b.processResult(e.result)},e.readAsText(d)},a.prototype.processResult=function(a){try{var b=this.data.getDataFromJSON(a);this.importData=b}catch(a){this.importError="Datei hat ein ungültiges Format. ("+a+")"}},a.prototype.clear=function(){this.importError=null,this.importData=null,this.importFile.value=null},a.prototype.import=function(){this.importDeleteCurrentLocations?j(this.dialogService,"Wirklich alle aktuellen Orte vor dem Import löschen?","",this.executeImport.bind(this)):this.executeImport()},a.prototype.executeImport=function(){if(this.importGameInfo){var a=this.data.getGameInfo();Object.assign(a,this.importData.gameInfo)}var b=this.data.getLocations();this.importDeleteCurrentLocations&&b.splice(0,b.length);for(var c=this.importData.locations,d=Array.isArray(c),e=0,c=d?c:c[Symbol.iterator]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{if(e=c.next(),e.done)break;f=e.value}var g=f;g.id=this.data.getNextLocationId(),b.push(g)}this.clear(),this.dialogService.open({viewModel:i,model:{title:"Import erfolgreich!"}})},a}())||l)),a("ToolsImport",m)}}}),function(){var a=System.amdDefine;a("tools.html!github:systemjs/plugin-text@0.0.8.js",[],function(){return'<template><require from="tools-import"></require><div class="tools"><div class="panel panel-primary"><div class="panel-heading"><h3 class="panel-title">Globale Operationen</h3></div><div class="panel-body center"><button click.trigger="deleteEverything()" class="btn-danger button-delete-everything"><i class="fa fa-trash-o" aria-hidden="true"></i> Alles löschen</button></div></div><iframe ref="invisibleDownloadIFrame" style="display:none;"></iframe><div class="panel panel-primary"><div class="panel-heading"><h3 class="panel-title">Export</h3></div><div class="panel-body center"><button click.trigger="saveDataToJSON()"><i class="fa fa-floppy-o" aria-hidden="true"></i> Herunterladen</button></div></div><div class="panel panel-primary"><div class="panel-heading"><h3 class="panel-title">Import</h3></div><div class="panel-body center"><tools-import></tools-import></div></div></div></template>'})}(),System.register("build-version-display.js",[],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d;return{setters:[],execute:function(){a("BuildVersionDisplay",d=function a(){c(this,a),this.buildVersion="0.9.12"}),a("BuildVersionDisplay",d)}}}),System.register("location.js",["./utility","./build-version-display"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h;return{setters:[function(a){d=a.replaceAll},function(a){e=a.BuildVersionDisplay}],execute:function(){f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),a("Location",g=function(){function a(b,d,e,f,g,h){c(this,a),this.id=0,this.locationCode="",this.locationName="",this.sceneName="",this.description="",this.nextLocations=[],this.printChecked=!0,this.id=b,this.locationCode=d?d:"",this.locationName=e?e:"",this.sceneName=f?f:"",this.description=g?g:"",this.nextLocations=h?h:[]}return a.prototype.toQRCodeText=function(a){var b="~~~~\n",c="~~~\n",e="";if(e+=d(this.sceneName.trim()+"\n",b,c),e+=b,e+=d(this.description.trim()+"\n",b,c),e+=b,this.nextLocations.length>0)for(var f=this.nextLocations,g=Array.isArray(f),h=0,f=g?f:f[Symbol.iterator]();;){var i;if(g){if(h>=f.length)break;i=f[h++]}else{if(h=f.next(),h.done)break;i=h.value}var j=i;e+="- Wenn du ["+j.decision.trim()+"], dann gehe zu ["+j.locationName.trim()+"].\n"}else e+="\n";return e+=b,e+="Spiel: "+d(a.name.trim()+"\n",b,c),e+="Format: 01"},a.revive=function(b){for(var c=$.extend(new a,b),d=0;d<c.nextLocations;d++)c.nextLocations[i]=$.extend(new h,b.nextLocations[i]);return c},f(a,[{key:"locationCodeUpperCase",get:function(){return this.locationCode.toUpperCase()}}]),a}()),a("Location",g),a("NextLocation",h=function(){function a(b,d){c(this,a),this.decision="Entscheidung",this.locationName="Zielort",this.decision=b?b:"",this.locationName=d?d:""}return a.prototype.clone=function(){return new a(this.decision,this.locationName)},a}()),a("NextLocation",h)}}}),System.register("game-info.js",[],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d;return{setters:[],execute:function(){a("GameInfo",d=function(){function a(b,d){c(this,a),this.name="Spielname",this.startingLocation="Startort",this.name=b,this.startingLocation=d}return a.prototype.clone=function(){return new a(this.name,this.startingLocation)},a.revive=function(b){return $.extend(new a,b)},a}()),a("GameInfo",d)}}}),System.register("messages.js",[],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f;return{setters:[],execute:function(){a("LocationViewed",d=function a(b){c(this,a),this.location=b}),a("LocationViewed",d),a("SaveStateChanged",e=function a(){c(this,a)}),a("SaveStateChanged",e),a("PrintLocations",f=function a(b){c(this,a),this.locations=b}),a("PrintLocations",f)}}}),System.register("data.js",["./location","./game-info","./utility","localforage","aurelia-framework","aurelia-event-aggregator","./messages"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h,i,j,k,l,m,n,o;return{setters:[function(a){d=a.Location,e=a.NextLocation},function(a){f=a.GameInfo},function(a){g=a.areEqual,h=a.cloneData},function(a){i=a},function(a){j=a.inject},function(a){k=a.EventAggregator},function(a){l=a.SaveStateChanged}],execute:function(){a("Data",(m=j(k),o=m(n=function(){function a(b){c(this,a),this.data=null,this.lastSaveData=null,this.lastSuccessfulSaveTime=null,this.lastSaveError=null,this.saveDataDelay=5e3,this.eventAggregator=b}return a.prototype.getNextLocationId=function(){var a=this.data.locations.length;return 0===a?0:this.data.locations[a-1].id+1},a.prototype.loadData=function(){var b=this;return new Promise(function(c){i.getItem("data").then(function(d){d?(console.log("Data loaded!"),a.reviveData(d),b.data=d):(console.log("No data saved yet. Using default data."),b.data=b.getDefaultData()),b.lastSuccessfulSaveTime=new Date,b.lastSaveData=h(b.data),b.queueSaveData(),c()}).catch(function(a){console.log("Couldn't load data: "+a),b.data=null})})},a.prototype.getDefaultData=function(){return{locations:[],gameInfo:new f("Spielname","Startort")}},a.reviveData=function(a){for(var b=0;b<a.locations.length;b++)a.locations[b]=d.revive(a.locations[b]);a.gameInfo=f.revive(a.gameInfo)},a.prototype.saveData=function a(){var b=this,a=h(this.data);return g(a,this.lastSaveData)?(this.lastSuccessfulSaveTime=new Date,this.eventAggregator.publish(new l),void this.queueSaveData()):void i.setItem("data",a).then(function(){b.lastSaveData=a,b.lastSuccessfulSaveTime=new Date,b.lastSaveError=null}).catch(function(a){console.log("Couldn't save data: "+a),b.lastSaveError=a}).then(function(){b.eventAggregator.publish(new l),b.queueSaveData()})},a.prototype.queueSaveData=function(){setTimeout(this.saveData.bind(this),this.saveDataDelay)},a.prototype.ensureDataIsLoaded=function(){return this.data?new Promise(function(a){a()}):(console.log("Starting to load..."),this.loadData())},a.prototype.getLocations=function(){return this.data.locations},a.prototype.getLocation=function(a){return this.data.locations.filter(function(b){return b.id==a})[0]},a.prototype.getLocationCount=function(){return this.data.locations.length},a.prototype.getTargetLocationFromNextLocation=function(a,b){return b.locationName?this.getFirstLocationFilter(function(c){return c.locationName===b.locationName&&c!==a}):null},a.prototype.getFirstLocationFilter=function(a){var b=this.data.locations.filter(a);return b.length>0?b[0]:null},a.prototype.createLocation=function(){var a=new d(this.getNextLocationId());return this.data.locations.push(a),a},a.prototype.getGameInfo=function(){return this.data.gameInfo},a.prototype.deleteAll=function(){this.data=this.getDefaultData()},a.prototype.saveDataToJSON=function(){return JSON.stringify(this.data,null,2)},a.prototype.getDataFromJSON=function(b){var c=JSON.parse(b);if(!c.locations||!c.gameInfo)throw new Error("Wrong JSON Format");return a.reviveData(c),c},a}())||n)),a("Data",o)}}}),System.register("dialog-info.js",["aurelia-framework","aurelia-dialog"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h;return{setters:[function(a){d=a.inject},function(a){e=a.DialogController}],execute:function(){a("DialogInfo",(f=d(e),h=f(g=function(){function a(b){c(this,a),this.dialogController=b}return a.prototype.activate=function(a){a.icon=a.icon?a.icon:"fa-check",this.data=a},a}())||g)),a("DialogInfo",h)}}}),System.register("tools.js",["./location","./data","aurelia-framework","aurelia-router","aurelia-dialog","./dialog-info","./utility"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h,i,j,k,l,m;return{setters:[function(a){d=a.Location},function(a){e=a.Data},function(a){f=a.inject},function(a){g=a.Router},function(a){h=a.DialogService},function(a){i=a.DialogInfo},function(a){j=a.openDefaultDeleteConfirmationDialog}],execute:function(){a("Tools",(k=f(e,g,h),m=k(l=function(){function a(b,d,e){c(this,a),this.data=b,this.router=d,this.dialogService=e}return a.prototype.deleteEverything=function(){var a=this;j(this.dialogService,"Alles löschen? Sicher?","",function(){a.data.deleteAll(),a.dialogService.open({viewModel:i,model:{title:"Spiel-Info und Orte gelöscht."}})})},a.prototype.saveDataToJSON=function(){var a=this.data.saveDataToJSON();this.downloadFile(a)},a.prototype.downloadFile=function(a){var b=new Blob([a],{type:"application/x-please-download-me"});null!==this.textFile&&window.URL.revokeObjectURL(this.textFile),this.textFile=window.URL.createObjectURL(b),this.invisibleDownloadIFrame.src=this.textFile},a}())||l)),a("Tools",m)}}}),System.register("dialog-confirmation.js",["aurelia-framework","aurelia-dialog"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g,h;return{setters:[function(a){d=a.inject},function(a){e=a.DialogController}],execute:function(){a("DialogConfirmation",(f=d(e),h=f(g=function(){function a(b){c(this,a),this.dialogController=b}return a.prototype.activate=function(a){this.data=a},a}())||g)),a("DialogConfirmation",h)}}}),System.register("utility.js",["./dialog-confirmation"],function(a,b){"use strict";function c(a,b){if("object"==("undefined"==typeof a?"undefined":j(a))&&null!=a&&"object"==("undefined"==typeof b?"undefined":j(b))&&null!=b){if(Object.keys(a).length!=Object.keys(b).length)return!1;for(var d in a){if(!b.hasOwnProperty(d))return!1;if(!c(a[d],b[d]))return!1}return!0}return a===b}function d(a){return JSON.parse(JSON.stringify(a))}function e(a){return a<10&&(a="0"+a),a}function f(a){return String(a).replace(/[&<>"'`=\/]/g,function(a){return k[a]})}function g(a,b,c){for(;a.indexOf(b)!==-1;)a=a.replace(b,c);return a}function h(a,b,c,d,e){a.open({viewModel:i,model:{title:b,content:c,ok:"Löschen",okIcon:"fa-trash-o",okClass:"btn-danger",cancel:"Abbrechen",cancelIcon:"fa-ban",cancelClass:"btn-normal"},lock:!0}).whenClosed(function(a){a.wasCancelled?e&&e():d&&d()})}var i,j,k;return a("areEqual",c),a("cloneData",d),a("formatTwoDigits",e),a("escapeHtml",f),a("replaceAll",g),a("openDefaultDeleteConfirmationDialog",h),{setters:[function(a){i=a.DialogConfirmation}],execute:function(){j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},k={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"}}}}),System.register("value-converters.js",["./utility"],function(a,b){"use strict";function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d,e,f,g;return{setters:[function(a){d=a.escapeHtml}],execute:function(){a("NewlinesToBrValueConverter",e=function(){function a(){c(this,a)}return a.prototype.toView=function(a){return a&&a.split("\n").join("<br/>")},a}()),a("NewlinesToBrValueConverter",e),a("EscapeHtmlValueConverter",f=function(){function a(){c(this,a)}return a.prototype.toView=function(a){return a&&d(a)},a}()),a("EscapeHtmlValueConverter",f),a("SortValueConverter",g=function(){function a(){c(this,a)}return a.prototype.toView=function(a,b,c){if(!a)return a;var d=c.match(/^desc*/i)?1:-1,e=a.slice().sort(function(a,c){var e=a.toUpperCase?a[b].toUpperCase():a[b],f=c.toUpperCase?c[b].toUpperCase():c[b];return e<f?d:e>f?-d:0});return e},a}()),a("SortValueConverter",g)}}});